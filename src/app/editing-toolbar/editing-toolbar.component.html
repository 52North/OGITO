<!--suppress AngularUndefinedBinding -->  <!-- to fix a bug in webstorm -->
<div class="editToolbar"   *ngIf="isVisible$ | async"  [style.left.px]="x" [style.top.px]="y"
     (panstart)="onPanStart($event)" (panmove)="onPan($event)">
<mat-card>
 <!--  <mat-divider [vertical]="true"></mat-divider> -->
  <div class="container">
 <div>
    <mat-toolbar>
      <button   *ngIf= " (layerTypeEdit$ == 'Point' || layerTypeEdit$ == 'Multi'|| layerTypeEdit$ == 'MultiPoint') " mat-icon-button
                (click)="drawingShapes('Point')" matTooltip="Add point/marker" [ngClass]="actionActive['Point'] ? 'active': 'normal'">
        <mat-icon>add_location</mat-icon>
      </button>
      <!-- <button   *ngIf= " (layerTypeEdit$ == 'Point' || layerTypeEdit$ == 'Multi' || layerTypeEdit$ == 'MultiPoint') " mat-icon-button
                (click)="drawingShapes('PointAttr')" matTooltip="Add point/marker + attribute TEST GITHUB workflow" [ngClass]="actionActive['Point'] ? 'active': 'normal'">
        <mat-icon svgIcon="add_location_attr"></mat-icon>
      </button> -->
      <button mat-icon-button *ngIf="(layerTypeEdit$ == 'Line' || layerTypeEdit$ =='Multi' || layerTypeEdit$ == 'Polygon'|| layerTypeEdit$ == 'MultiPolygon'|| layerTypeEdit$ == 'MultiPolygonZ') "
              (click)="drawingShapes('LineString')" matTooltip="Add line" [ngClass]="actionActive['LineString'] ? 'active': 'normal'">
        <mat-icon    svgIcon="add_line"></mat-icon>
      </button>
      <button *ngIf="(layerTypeEdit$ == 'Polygon' || layerTypeEdit$ == 'Multi'|| layerTypeEdit$ == 'MultiPolygon'|| layerTypeEdit$ == 'MultiPolygonZ') " mat-icon-button
              (click)="drawingShapes('Polygon')" matTooltip="Add polygon" [ngClass]="actionActive['Polygon'] ? 'active': 'normal'">
        <mat-icon svgIcon="add_poly"></mat-icon>
      </button>
     <!--
      <button *ngIf="(layerTypeEdit$ == 'Polygon' || layerTypeEdit$ == 'Multi'|| layerTypeEdit$ == 'MultiPolygon'|| layerTypeEdit$ == 'MultiPolygonZ') " mat-icon-button
              (click)="drawingShapes('Square')" matTooltip="Add Square" [ngClass]="actionActive['Square'] ? 'active': 'normal'">
        <mat-icon>crop_square</mat-icon>
      </button>
      <button *ngIf="(layerTypeEdit$ == 'Polygon' || layerTypeEdit$ == 'Multi'|| layerTypeEdit$ == 'MultiPolygon'|| layerTypeEdit$ == 'MultiPolygonZ') " mat-icon-button
              (click)="drawingShapes('Circle')" matTooltip="Add Circle" [ngClass]="actionActive['Circle'] ? 'active': 'normal'">
        <mat-icon>radio_button_unchecked</mat-icon>
      </button>
      -->
      <button mat-icon-button (click)="startEditAction('ModifyBox');showSymbolPanel(false);" matTooltip="Select element(s) to move"
              [ngClass]="actionActive['ModifyBox'] ? 'active': 'normal'" >
        <mat-icon svgIcon="selectBoxFeature"></mat-icon>
      </button>

      <button mat-icon-button (click)="startEditAction('Rating');showSymbolPanel(false);" matTooltip="Rank element"
              [ngClass]="actionActive['Rating'] ? 'active': 'normal'" >
        <mat-icon>star_rate</mat-icon>
      </button>

      <button mat-icon-button (click)="startEditAction('RatingMeasure');showSymbolPanel(false);" matTooltip="Rank measure"
              [ngClass]="actionActive['RatingMeasure'] ? 'active': 'normal'" >
        <mat-icon  svgIcon="ratingActionPlan"></mat-icon>
      </button>
      <!--
      <button mat-icon-button (click)="startEditAction('Copy');showSymbolPanel(false)" matTooltip="Copiar element(s)"
              [ngClass]="actionActive['Copy'] ? 'active': 'normal'" >
        <mat-icon>content_copy</mat-icon>
      </button>
      <button mat-icon-button (click)="startEditAction('Rotate');showSymbolPanel(false)" matTooltip="Rotate element(s)"
              [ngClass]="actionActive['Rotate'] ? 'active': 'normal'" >
        <mat-icon>rotate_right</mat-icon>
      </button> -->
      <button mat-icon-button (click)="startEditAction('MeasureLine');showSymbolPanel(false)" matTooltip="Measure Lineal Distance"
              [ngClass]="actionActive['MeasureLine'] ? 'active': 'normal'" >
        <mat-icon svgIcon="measureLine"></mat-icon>
      </button>
      <button mat-icon-button (click)="startEditAction('MeasureArea');showSymbolPanel(false)" matTooltip="Measure Areal Distance"
              [ngClass]="actionActive['MeasureArea'] ? 'active': 'normal'" >
        <mat-icon svgIcon="measureArea"></mat-icon>
      </button>

      <button mat-icon-button (click)="startEditAction('Delete'); showSymbolPanel(false)"  aria-label="delete" matTooltip="Delete element"
              [ngClass]="actionActive['Delete'] ? 'active': 'normal'">
        <mat-icon>delete_forever</mat-icon>
      </button>
      <!-- <button mat-icon-button (click)="startEditAction('Identify');showSymbolPanel(false)"  aria-label="identify" matTooltip="Identify element"
              [ngClass]="actionActive['Identify'] ? 'active': 'normal'">
        <mat-icon svgIcon="identify"></mat-icon>
      </button> -->
      <!--<button mat-icon-button (click)="startEditAction('Search');showSymbolPanel(false)"  aria-label="identify" matTooltip="Search in map"
              [ngClass]="actionActive['Search'] ? 'active': 'normal'">
        <mat-icon>search</mat-icon>
      </button> -->
      <button mat-icon-button aria-label="UndoLastEdit" (click)="startEditAction('Undo');" matTooltip="Undo">
        <mat-icon>undo</mat-icon>
      </button>
      <button mat-icon-button (click)="showSymbolPanel(true)" matTooltip="Open symbol list"
              [ngClass]="actionActive['showSymbols'] ? 'active': 'normal'">
        <mat-icon   aria-label="">category</mat-icon>
      </button>
      <button [disabled]="stopSave" mat-icon-button (click)="saveLayer()" matTooltip = "Save edits into the layers">
        <mat-icon>save_alt</mat-icon>
      </button>
      <!--<button  [disabled]="stopSaveAll" mat-icon-button (click)="saveAllLayer()" matTooltip = "Save all edits in all layers">
        <mat-icon>save</mat-icon>
      </button> -->


     </mat-toolbar>
   </div>

    <div class="divClosing">
      <span class = "spacer"></span>
      <button class="closeIcon" mat-flat-button (click)="closeEditingToolbar()"  >
        <mat-icon >close</mat-icon>
      </button>
    </div>
  </div>
</mat-card>
</div>
