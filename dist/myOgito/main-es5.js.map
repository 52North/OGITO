{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-configuration.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/editing-toolbar/editing-toolbar.component.ts","webpack:///src/app/editing-toolbar/editing-toolbar.component.html","webpack:///src/app/home/home.component.ts","webpack:///src/app/home/home.component.html","webpack:///src/app/layer-panel/layer-panel.component.ts","webpack:///src/app/layer-panel/layer-panel.component.html","webpack:///src/app/map-qgs-style.service.ts","webpack:///src/app/map/map.component.ts","webpack:///src/app/map/map.component.html","webpack:///src/app/material-module.ts","webpack:///src/app/open-layers.service.ts","webpack:///src/app/symbol-list/symbol-list.component.ts","webpack:///src/app/symbol-list/symbol-list.component.html","webpack:///src/app/toolbar/toolbar.component.ts","webpack:///src/app/toolbar/toolbar.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AppConfiguration","qGsServerUrl","wmsVersion","wfsVersion","wmtsVersion","qgsProject","srsName","curProject","svgFolder","qgsProjectFolder","QgsFileProject","mapZoom","maxZoom","minZoom","threshold","routes","path","component","redirectTo","AppRoutingModule","forRoot","imports","AppComponent","title","selector","templateUrl","styleUrls","AppModule","declarations","providers","bootstrap","EditingToolbarComponent","iconRegistry","sanitizer","openLayersService","x","y","startX","startY","stopSave","stopSaveAll","actionActive","Point","LineString","Polygon","Square","Box","Circle","ModifyBox","Rotate","Copy","Identify","Delete","Measure","addSvgIcon","bypassSecurityTrustResourceUrl","subsToShowEditToolbar","showEditToolbar$","subscribe","data","showToolbar","error","console","log","subsToGeomTypeEditing","layerEditing$","updateLayerTypeEdit","layerGeom","event","preventDefault","deltaX","deltaY","isVisible$","geomType","layerTypeEdit$","shapeType","updateShapeEditType","showSymbolPanel","highlightAction","action","key","updateEditAction","visible","updateShowSymbolPanel","updateDeleteFeats","confirm","updateSaveCurrentLayer","setTimeout","alert","HomeComponent","screen","width","height","editSettings","showInfo","exitToApp","LayerPanelComponent","layerVisClick","editLayerClick","layersOrder","layersBackOrder","layerBackVisClick","selectedOptions","baseLayers","editLayers","previousIndex","currentIndex","emit","showLayerPanel$","$event","layer","stopImmediatePropagation","layerName","layerActive","updateShowEditToolbar","value","selectedList","options","map","s","MapQgsStyleService","nodes","canvas","document","createElement","context","getContext","feature","styleLyr","Object","length","attr","featValue","get","getOwnPropertyNames","fillColor","angle","spacing","line_width","pixelRatio","fillStyle","beginPath","fillRect","fill","moveTo","lineTo","i","lineWidth","strokeStyle","stroke","thePattern","createPattern","color","transparency","rgbaColor","split","concat","symType","symLyrCls","symAlpha","props","newStyle","outColor","symText","symStyle","l","propNode","clave","getAttribute","valor","lineJoin","getRGBAcolor","setColor","pattern","createLinePattern","capStyle","lineDash","Number","lineCap","lineDashOffset","offset","image","radius","filename","size","outlineWidth","verticalAnchorPoint","crossOrigin","scale","src","textBaseline","offsetY","font","offsetX","text","scaleMethod","points","radius2","Math","PI","geometry","xmlRendererV2","renderer","symbolType","categories","getElementsByTagName","tnodes","children","node","label","symbol","symbols","syms","j","symNode","symName","hasOwnProperty","layers","olStyleLst","olStyle","mapQgsSymbol","push","olStyleLst2","style","alpha","type","providedIn","MapComponent","mapQgsStyleService","existingProject","wgs84ID","mapCenterXY","fieldWFSLayers","layerStyles","select","loadedWfsLayers","curEditingLayer","cacheFeatures","canBeUndo","editBuffer","layersGeometryType","featId","subsToShapeEdit","shapeEditType$","enableAddShape","removeInteractions","subsTocurrentSymbol","currentSymbol$","changeSymbol","subsToSaveCurrentLayer","saveCurrentLayer$","saveEdits","subsToZoomHome","zoomHome$","zoomToHome","editAction$","startTranslating","startRotating","startCopying","startIdentifying","startDeleting","startMeasuring","undoLastEdit","initializeMap","readProjectFile","parseProject","updateMapView","workQgsProject","updateExistingProject","loadDefaultMap","currentStyle","currentClass","pinchZoom","constrainResolution","pinchRotate","dragPan","dragRotate","dragZoom","dragAndDropInteraction","formatConstructors","source","interactions","extend","target","view","projection","center","zoom","selectStyle","measureTooltipElement","parentNode","removeChild","className","measureTooltip","element","positioning","addOverlay","leftMinCorner","mapCanvasExtent","rightMinCorner","leftMaxCorner","hDistance","getCoordinates","srsID","vDistance","setView","addControl","on","touches","getView","setRotation","setZoom","setCenter","qGsProject","capRequest","urlWMS","parser","self","resultXml","fetch","response","xmlWMS","read","loadWMSlayers","urlWFS","resultWfs","loadWFSlayers","qgsfile","fieldLayers","xmlParser","DOMParser","xmlText","parseFromString","projectTitle","childNodes","nodeValue","projectionDef","defs","mapcanvas","units","extent","xmin","xmax","ymin","ymax","projectionWKT","projectWKT","replace","m","indexOf","n","bbox","slice","BBOX","projectProjection","layerTreeGroup","nLayers","legendGroups","legendGroup","groupName","layersinGroup","layerInGroup","mapLayersLst","lyr","createLayerStyles","fieldLst","fieldsConf","k","field","fieldName","getLayerStyles","XmlCapText","editingstyle","imageCircle","shape","tsource","geometryFunction","draw","freehand","stopClick","getEditingStyle","removeDragPinchInteractions","condition","olBrowserEvent","originalEvent","addInteraction","snap","createMeasureTooltip","listener","evt","sketch","tooltipCoord","coordinate","getGeometry","geom","output","type_","last","getLastCoordinate","first","getFirstCoordinate","sourceProj","getProjection","distance","round","innerHTML","setPosition","setId","String","set","getType","setGeometry","getProperties","newCoordinates","tgeometry","setOffset","addDragPinchInteractions","transaction","feats","dirty","removeOverlay","tlayer","getLayers","forEach","hitTolerance","selectedFeatures","getFeatures","getLength","f","lastFeat","clone","getId","tempId","removeFeature","clear","getInteractions","interaction","setActive","removeInteraction","featureTypeList","otherSrsLst","operationsLst","srs","operation","layerTitle","defaultSRS","otherSrs","operations","includes","bBox","dimensions","lowCorner","upperCorner","findGeometryType","outputFormat","loadedLayers","vectorSource","format","url","wfsVectorLayer","name","zIndex","layerStyle","findStyle","findDefaultStyleProvisional","addLayer","projectFile","qgsProj","method","err","selectedLayer","setVisible","getVisible","stopEditing","startEditing","editLayer","findIndex","writeTransactWfs","saveSketchLayer","updateLayerEditing","feat","item","index","splice","curEdits","filter","obj","lastOperation","pop","oldFeat","curFeatGeomClone","setStyle","addFeature","removeFeatEditBuffer","layerTrs","insert","update","t","strService","strUrl","formatWFS","formatGML","featureNS","featureType","xs","XMLSerializer","str","res","writeTransaction","serializeToString","body","textInsert","respUpdate","respDelete","textDelete","layername","findLayer","updateFeats","dragBox","getExtent","forEachFeatureIntersectingExtent","translate","features","tIndex","setZIndex","geometryType","subscriptions","add","unsubscribe","updateMapVisibleLayer","updateEditingLayer","updateOrderVisibleLayers","DemoMaterialModule","OpenLayersService","existingProject$","asObservable","showEditToolbarSource","layerEditingSource","shapeEditTypeSource","showSymbolPanelSource","showSymbolPanel$","currentSymbolSource","saveCurrentLayerSource","deleteFeatsSource","deleteFeats$","editActionSource","zoomHomeSource","projectOpened","next","shapeEdit","active","save","SymbolListComponent","variable","symbolActiveKey","symbols$","symbolsLength","subscriptionToShowSymbols","displaySymbolList$","subscriptionToLayerEditing","styles","getLayerStyle","getSymbolList","geometryTypeSymbols","myCanvas","changes","r","createSymbolsinCanvas","symbolDict","allCanvas","toArray","factor","nativeElement","devicePixelRatio","render","stylelayer","stylelayerClone","cx","cy","tempStyle","imgSize","drawFeature","rotation","heigthStroke","cloneStyle","strokeClone","getStroke","setWidth","getWidth","setStroke","wide","high","curDiv","getElementById","updateCurrentSymbol","ToolbarComponent","updateZoomHome","subscriptionExistingProject","environment","production","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","\r\n\r\nexport class AppConfiguration{\r\n  static qGsServerUrl = 'http://localhost/qgis/qgis_mapserv.fcgi.exe?';\r\n  static wmsVersion  = '1.3.0' ;\r\n  static wfsVersion = '2.0';\r\n  static wmtsVersion = '1.0.0';\r\n  static qgsProject = 'qgs_projects/DenaiLama/mappingDenaiLama.qgs';  //mappingDenaiLama\r\n  static srsName = 'EPSG:32647'   // tomarlo de aqui o del projecto?\r\n  // la ruta para accederlo dentro de la app\r\n  static curProject =   'http://localhost/' + AppConfiguration.qgsProject;  // to fecth the xml project file\r\n  static svgFolder = '../../assets/svg/';\r\n  static qgsProjectFolder = 'D:/PhD/code/fromScratch/myOgito/src/assets/';\r\n  // la ruta para accederlo desde Qgs Server\r\n  static QgsFileProject = AppConfiguration.qgsProjectFolder + AppConfiguration.qgsProject; // to use with tqhe qgis server\r\n  static mapZoom = 13;\r\n  static maxZoom = 20 ;\r\n  static minZoom = 8 ;\r\n  static threshold = 1000; // Distance in meter to close a polygon being drawn with a line.\r\n}\r\n\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport {HomeComponent} from './home/home.component';\n\n\nconst routes: Routes = [\n  {path: '', component: HomeComponent},\n  {path: '**', redirectTo: ''}\n\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'myOgito';\n\n\n\n\n}\n","<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->\n<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->\n<!-- * * * * * * * * * * and can be replaced. * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n<!-- * * * * * * * * * Delete the template below * * * * * * * * * * -->\n<!-- * * * * * * * to get started with your project! * * * * * * * * -->\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n\n<style>\n  :host {\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin: 8px 0;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .toolbar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar img {\n    margin: 0 16px;\n  }\n\n  .toolbar #twitter-logo {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar #twitter-logo:hover {\n    opacity: 0.8;\n  }\n\n  .content {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card svg.material-icons path {\n    fill: #888;\n  }\n\n  .card-container {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card {\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container .card:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container .card:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container .card:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container .card:not(.highlight-card):hover .material-icons path {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card span {\n    margin-left: 60px;\n  }\n\n  svg#rocket {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a,\n  a:visited,\n  a:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a:hover {\n    color: #125699;\n  }\n\n  .terminal {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal::before {\n    content: \"\\2022 \\2022 \\2022\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal pre {\n    font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer a {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27,31,35,.2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg,#fafbfc,#eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n    font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;\n  }\n\n  .github-star-badge:hover {\n    background-image: linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);\n    border-color: rgba(27,31,35,.35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge .material-icons {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n\n  /* Responsive Styles */\n  @media screen and (max-width: 767px) {\n\n    .card-container > *:not(.circle-link) ,\n    .terminal {\n      width: 100%;\n    }\n\n    .card:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card span {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke {\n      display: none;\n      visibility: hidden;\n    }\n  }\n</style>\n\n<router-outlet></router-outlet>\n\n<!-- Toolbar -->\n<!--\n<div class=\"toolbar\" role=\"banner\">\n  <img\n    width=\"40\"\n    alt=\"Angular Logo\"\n    src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg==\"\n  />\n  <span>Welcome by {{ title }}</span>\n    <div class=\"spacer\"></div>\n    <a aria-label=\"Angular on twitter\" target=\"_blank\" rel=\"noopener\" href=\"https://twitter.com/angular\" title=\"Twitter\">\n      <svg id=\"twitter-logo\" height=\"24\" data-name=\"Logo\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 400\">\n        <rect width=\"400\" height=\"400\" fill=\"none\"/>\n        <path d=\"M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23\" fill=\"#fff\"/>\n      </svg>\n    </a>\n</div>\n-->\n<!--\n<div class=\"content\" role=\"main\">  -->\n\n   <!-- Highlight Card -->\n  <!--\n  <div class=\"card highlight-card card-small\">\n\n   <svg id=\"rocket\" alt=\"Rocket Ship\" xmlns=\"http://www.w3.org/2000/svg\" width=\"101.678\" height=\"101.678\" viewBox=\"0 0 101.678 101.678\">\n      <g id=\"Group_83\" data-name=\"Group 83\" transform=\"translate(-141 -696)\">\n        <circle id=\"Ellipse_8\" data-name=\"Ellipse 8\" cx=\"50.839\" cy=\"50.839\" r=\"50.839\" transform=\"translate(141 696)\" fill=\"#dd0031\"/>\n        <g id=\"Group_47\" data-name=\"Group 47\" transform=\"translate(165.185 720.185)\">\n          <path id=\"Path_33\" data-name=\"Path 33\" d=\"M3.4,42.615a3.084,3.084,0,0,0,3.553,3.553,21.419,21.419,0,0,0,12.215-6.107L9.511,30.4A21.419,21.419,0,0,0,3.4,42.615Z\" transform=\"translate(0.371 3.363)\" fill=\"#fff\"/>\n          <path id=\"Path_34\" data-name=\"Path 34\" d=\"M53.3,3.221A3.09,3.09,0,0,0,50.081,0,48.227,48.227,0,0,0,18.322,13.437c-6-1.666-14.991-1.221-18.322,7.218A33.892,33.892,0,0,1,9.439,25.1l-.333.666a3.013,3.013,0,0,0,.555,3.553L23.985,43.641a2.9,2.9,0,0,0,3.553.555l.666-.333A33.892,33.892,0,0,1,32.647,53.3c8.55-3.664,8.884-12.326,7.218-18.322A48.227,48.227,0,0,0,53.3,3.221ZM34.424,9.772a6.439,6.439,0,1,1,9.106,9.106,6.368,6.368,0,0,1-9.106,0A6.467,6.467,0,0,1,34.424,9.772Z\" transform=\"translate(0 0.005)\" fill=\"#fff\"/>\n        </g>\n      </g>\n    </svg>\n\n    <span>{{ title }} app is running!</span>\n\n    <svg id=\"rocket-smoke\" alt=\"Rocket Ship Smoke\" xmlns=\"http://www.w3.org/2000/svg\" width=\"516.119\" height=\"1083.632\" viewBox=\"0 0 516.119 1083.632\">\n      <path id=\"Path_40\" data-name=\"Path 40\" d=\"M644.6,141S143.02,215.537,147.049,870.207s342.774,201.755,342.774,201.755S404.659,847.213,388.815,762.2c-27.116-145.51-11.551-384.124,271.9-609.1C671.15,139.365,644.6,141,644.6,141Z\" transform=\"translate(-147.025 -140.939)\" fill=\"#f5f5f5\"/>\n    </svg>\n\n  </div> -->\n\n  <!-- Resources -->\n  <!--\n  <h2>Resources</h2>\n  <p>Here are some links to help you get started:</p>\n\n  <div class=\"card-container\">\n    <a class=\"card\" target=\"_blank\" rel=\"noopener\" href=\"https://angular.io/tutorial\">\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z\"/></svg>\n\n      <span>Learn Angular</span>\n\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/></svg>    </a>\n\n    <a class=\"card\" target=\"_blank\" rel=\"noopener\" href=\"https://angular.io/cli\">\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/></svg>\n\n      <span>CLI Documentation</span>\n\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/></svg>\n    </a>\n\n    <a class=\"card\" target=\"_blank\" rel=\"noopener\" href=\"https://blog.angular.io/\">\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z\"/></svg>\n\n      <span>Angular Blog</span>\n\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/></svg>\n    </a>\n\n  </div>\n  -->\n\n  <!-- Next Steps -->\n <!--\n  <h2>Next Steps</h2>\n  <p>What do you want to do next with your app?</p>\n\n  <input type=\"hidden\" #selection>\n\n  <div class=\"card-container\">\n    <div class=\"card card-small\" (click)=\"selection.value = 'component'\" tabindex=\"0\">\n        <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/></svg>\n\n      <span>New Component</span>\n    </div>\n\n    <div class=\"card card-small\" (click)=\"selection.value = 'material'\" tabindex=\"0\">\n        <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/></svg>\n\n      <span>Angular Material</span>\n    </div>\n\n    <div class=\"card card-small\" (click)=\"selection.value = 'pwa'\" tabindex=\"0\">\n        <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/></svg>\n\n      <span>Add PWA Support</span>\n    </div>\n\n    <div class=\"card card-small\" (click)=\"selection.value = 'dependency'\" tabindex=\"0\">\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/></svg>\n\n      <span>Add Dependency</span>\n    </div>\n\n    <div class=\"card card-small\" (click)=\"selection.value = 'test'\" tabindex=\"0\">\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/></svg>\n\n      <span>Run and Watch Tests</span>\n    </div>\n\n    <div class=\"card card-small\" (click)=\"selection.value = 'build'\" tabindex=\"0\">\n      <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/></svg>\n\n      <span>Build for Production</span>\n    </div>\n  </div>\n  -->\n  <!-- Terminal -->\n <!--\n  <div class=\"terminal\" [ngSwitch]=\"selection.value\">\n      <pre *ngSwitchDefault>ng generate component xyz</pre>\n      <pre *ngSwitchCase=\"'material'\">ng add @angular/material</pre>\n      <pre *ngSwitchCase=\"'pwa'\">ng add @angular/pwa</pre>\n      <pre *ngSwitchCase=\"'dependency'\">ng add _____</pre>\n      <pre *ngSwitchCase=\"'test'\">ng test</pre>\n      <pre *ngSwitchCase=\"'build'\">ng build --prod</pre>\n  </div>\n\n  <div class=\"terminal\" >\n    <span> Keeping alive to copy the style</span>\n  </div> !-->\n\n    <!-- Links -->\n  <!--\n <div class=\"card-container\">\n   <a class=\"circle-link\" title=\"Animations\" href=\"https://angular.io/guide/animations\" target=\"_blank\" rel=\"noopener\">\n     <svg id=\"Group_20\" data-name=\"Group 20\" xmlns=\"http://www.w3.org/2000/svg\" width=\"21.813\" height=\"23.453\" viewBox=\"0 0 21.813 23.453\">\n       <path id=\"Path_15\" data-name=\"Path 15\" d=\"M4099.584,972.736h0l-10.882,3.9,1.637,14.4,9.245,5.153,9.245-5.153,1.686-14.4Z\" transform=\"translate(-4088.702 -972.736)\" fill=\"#ffa726\"/>\n       <path id=\"Path_16\" data-name=\"Path 16\" d=\"M4181.516,972.736v23.453l9.245-5.153,1.686-14.4Z\" transform=\"translate(-4170.633 -972.736)\" fill=\"#fb8c00\"/>\n       <path id=\"Path_17\" data-name=\"Path 17\" d=\"M4137.529,1076.127l-7.7-3.723,4.417-2.721,7.753,3.723Z\" transform=\"translate(-4125.003 -1058.315)\" fill=\"#ffe0b2\"/>\n       <path id=\"Path_18\" data-name=\"Path 18\" d=\"M4137.529,1051.705l-7.7-3.723,4.417-2.721,7.753,3.723Z\" transform=\"translate(-4125.003 -1036.757)\" fill=\"#fff3e0\"/>\n       <path id=\"Path_19\" data-name=\"Path 19\" d=\"M4137.529,1027.283l-7.7-3.723,4.417-2.721,7.753,3.723Z\" transform=\"translate(-4125.003 -1015.199)\" fill=\"#fff\"/>\n     </svg>\n   </a>\n\n   <a class=\"circle-link\" title=\"CLI\" href=\"https://cli.angular.io/\" target=\"_blank\" rel=\"noopener\">\n     <svg alt=\"Angular CLI Logo\" xmlns=\"http://www.w3.org/2000/svg\" width=\"21.762\" height=\"23.447\" viewBox=\"0 0 21.762 23.447\">\n       <g id=\"Group_21\" data-name=\"Group 21\" transform=\"translate(0)\">\n         <path id=\"Path_20\" data-name=\"Path 20\" d=\"M2660.313,313.618h0l-10.833,3.9,1.637,14.4,9.2,5.152,9.244-5.152,1.685-14.4Z\" transform=\"translate(-2649.48 -313.618)\" fill=\"#37474f\"/>\n         <path id=\"Path_21\" data-name=\"Path 21\" d=\"M2741.883,313.618v23.447l9.244-5.152,1.685-14.4Z\" transform=\"translate(-2731.05 -313.618)\" fill=\"#263238\"/>\n         <path id=\"Path_22\" data-name=\"Path 22\" d=\"M2692.293,379.169h11.724V368.618h-11.724Zm11.159-.6h-10.608v-9.345h10.621v9.345Z\" transform=\"translate(-2687.274 -362.17)\" fill=\"#fff\"/>\n         <path id=\"Path_23\" data-name=\"Path 23\" d=\"M2709.331,393.688l.4.416,2.265-2.28-2.294-2.294-.4.4,1.893,1.893Z\" transform=\"translate(-2702.289 -380.631)\" fill=\"#fff\"/>\n         <rect id=\"Rectangle_12\" data-name=\"Rectangle 12\" width=\"3.517\" height=\"0.469\" transform=\"translate(9.709 13.744)\" fill=\"#fff\"/>\n       </g>\n     </svg>\n   </a>\n\n   <a class=\"circle-link\" title=\"Augury\" href=\"https://augury.rangle.io/\" target=\"_blank\" rel=\"noopener\">\n     <svg alt=\"Angular Augury Logo\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"21.81\" height=\"23.447\" viewBox=\"0 0 21.81 23.447\">\n       <defs>\n         <clipPath id=\"clip-path\">\n           <rect id=\"Rectangle_13\" data-name=\"Rectangle 13\" width=\"10.338\" height=\"10.27\" fill=\"none\"/>\n         </clipPath>\n       </defs>\n       <g id=\"Group_25\" data-name=\"Group 25\" transform=\"translate(0)\">\n         <path id=\"Path_24\" data-name=\"Path 24\" d=\"M3780.155,311.417h0l-10.881,3.9,1.637,14.4,9.244,5.152,9.244-5.152,1.685-14.4Z\" transform=\"translate(-3769.274 -311.417)\" fill=\"#4a3493\"/>\n         <path id=\"Path_25\" data-name=\"Path 25\" d=\"M3862.088,311.417v23.447l9.244-5.152,1.685-14.4Z\" transform=\"translate(-3851.207 -311.417)\" fill=\"#311b92\"/>\n         <g id=\"Group_24\" data-name=\"Group 24\" transform=\"translate(6.194 6.73)\" opacity=\"0.5\">\n           <g id=\"Group_23\" data-name=\"Group 23\" transform=\"translate(0 0)\">\n             <g id=\"Group_22\" data-name=\"Group 22\" clip-path=\"url(#clip-path)\">\n               <path id=\"Path_26\" data-name=\"Path 26\" d=\"M3832.4,373.252a5.168,5.168,0,1,1-5.828-4.383,5.216,5.216,0,0,1,2.574.3,3.017,3.017,0,1,0,3.252,4.086Z\" transform=\"translate(-3822.107 -368.821)\" fill=\"#fff\"/>\n             </g>\n           </g>\n         </g>\n         <path id=\"Path_27\" data-name=\"Path 27\" d=\"M3830.582,370.848a5.162,5.162,0,1,1-3.254-4.086,3.017,3.017,0,1,0,3.252,4.086Z\" transform=\"translate(-3814.311 -359.969)\" fill=\"#fff\"/>\n       </g>\n     </svg>\n   </a>\n\n   <a class=\"circle-link\" title=\"Protractor\" href=\"https://www.protractortest.org/\" target=\"_blank\" rel=\"noopener\">\n     <svg alt=\"Angular Protractor Logo\" xmlns=\"http://www.w3.org/2000/svg\" width=\"21.81\" height=\"23.447\" viewBox=\"0 0 21.81 23.447\">\n       <g id=\"Group_26\" data-name=\"Group 26\" transform=\"translate(0)\">\n         <path id=\"Path_28\" data-name=\"Path 28\" d=\"M4620.155,311.417h0l-10.881,3.9,1.637,14.4,9.244,5.152,9.244-5.152,1.685-14.4Z\" transform=\"translate(-4609.274 -311.417)\" fill=\"#e13439\"/>\n         <path id=\"Path_29\" data-name=\"Path 29\" d=\"M4702.088,311.417v23.447l9.244-5.152,1.685-14.4Z\" transform=\"translate(-4691.207 -311.417)\" fill=\"#b52f32\"/>\n         <path id=\"Path_30\" data-name=\"Path 30\" d=\"M4651.044,369.58v-.421h1.483a7.6,7.6,0,0,0-2.106-5.052l-1.123,1.123-.3-.3,1.122-1.121a7.588,7.588,0,0,0-4.946-2.055v1.482h-.421v-1.485a7.589,7.589,0,0,0-5.051,2.058l1.122,1.121-.3.3-1.123-1.123a7.591,7.591,0,0,0-2.106,5.052h1.482v.421h-1.489v1.734h15.241V369.58Zm-10.966-.263a4.835,4.835,0,0,1,9.67,0Z\" transform=\"translate(-4634.008 -355.852)\" fill=\"#fff\"/>\n       </g>\n     </svg>\n   </a>\n\n   <a class=\"circle-link\" title=\"Find a Local Meetup\" href=\"https://www.meetup.com/find/?keywords=angular\" target=\"_blank\" rel=\"noopener\">\n     <svg alt=\"Meetup Logo\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24.607\" height=\"23.447\" viewBox=\"0 0 24.607 23.447\">\n       <path id=\"logo--mSwarm\" d=\"M21.221,14.95A4.393,4.393,0,0,1,17.6,19.281a4.452,4.452,0,0,1-.8.069c-.09,0-.125.035-.154.117a2.939,2.939,0,0,1-2.506,2.091,2.868,2.868,0,0,1-2.248-.624.168.168,0,0,0-.245-.005,3.926,3.926,0,0,1-2.589.741,4.015,4.015,0,0,1-3.7-3.347,2.7,2.7,0,0,1-.043-.38c0-.106-.042-.146-.143-.166a3.524,3.524,0,0,1-1.516-.69A3.623,3.623,0,0,1,2.23,14.557a3.66,3.66,0,0,1,1.077-3.085.138.138,0,0,0,.026-.2,3.348,3.348,0,0,1-.451-1.821,3.46,3.46,0,0,1,2.749-3.28.44.44,0,0,0,.355-.281,5.072,5.072,0,0,1,3.863-3,5.028,5.028,0,0,1,3.555.666.31.31,0,0,0,.271.03A4.5,4.5,0,0,1,18.3,4.7a4.4,4.4,0,0,1,1.334,2.751,3.658,3.658,0,0,1,.022.706.131.131,0,0,0,.1.157,2.432,2.432,0,0,1,1.574,1.645,2.464,2.464,0,0,1-.7,2.616c-.065.064-.051.1-.014.166A4.321,4.321,0,0,1,21.221,14.95ZM13.4,14.607a2.09,2.09,0,0,0,1.409,1.982,4.7,4.7,0,0,0,1.275.221,1.807,1.807,0,0,0,.9-.151.542.542,0,0,0,.321-.545.558.558,0,0,0-.359-.534,1.2,1.2,0,0,0-.254-.078c-.262-.047-.526-.086-.787-.138a.674.674,0,0,1-.617-.75,3.394,3.394,0,0,1,.218-1.109c.217-.658.509-1.286.79-1.918a15.609,15.609,0,0,0,.745-1.86,1.95,1.95,0,0,0,.06-1.073,1.286,1.286,0,0,0-1.051-1.033,1.977,1.977,0,0,0-1.521.2.339.339,0,0,1-.446-.042c-.1-.092-.2-.189-.307-.284a1.214,1.214,0,0,0-1.643-.061,7.563,7.563,0,0,1-.614.512A.588.588,0,0,1,10.883,8c-.215-.115-.437-.215-.659-.316a2.153,2.153,0,0,0-.695-.248A2.091,2.091,0,0,0,7.541,8.562a9.915,9.915,0,0,0-.405.986c-.559,1.545-1.015,3.123-1.487,4.7a1.528,1.528,0,0,0,.634,1.777,1.755,1.755,0,0,0,1.5.211,1.35,1.35,0,0,0,.824-.858c.543-1.281,1.032-2.584,1.55-3.875.142-.355.28-.712.432-1.064a.548.548,0,0,1,.851-.24.622.622,0,0,1,.185.539,2.161,2.161,0,0,1-.181.621c-.337.852-.68,1.7-1.018,2.552a2.564,2.564,0,0,0-.173.528.624.624,0,0,0,.333.71,1.073,1.073,0,0,0,.814.034,1.22,1.22,0,0,0,.657-.655q.758-1.488,1.511-2.978.35-.687.709-1.37a1.073,1.073,0,0,1,.357-.434.43.43,0,0,1,.463-.016.373.373,0,0,1,.153.387.7.7,0,0,1-.057.236c-.065.157-.127.316-.2.469-.42.883-.846,1.763-1.262,2.648A2.463,2.463,0,0,0,13.4,14.607Zm5.888,6.508a1.09,1.09,0,0,0-2.179.006,1.09,1.09,0,0,0,2.179-.006ZM1.028,12.139a1.038,1.038,0,1,0,.01-2.075,1.038,1.038,0,0,0-.01,2.075ZM13.782.528a1.027,1.027,0,1,0-.011,2.055A1.027,1.027,0,0,0,13.782.528ZM22.21,6.95a.882.882,0,0,0-1.763.011A.882.882,0,0,0,22.21,6.95ZM4.153,4.439a.785.785,0,1,0,.787-.78A.766.766,0,0,0,4.153,4.439Zm8.221,18.22a.676.676,0,1,0-.677.666A.671.671,0,0,0,12.374,22.658ZM22.872,12.2a.674.674,0,0,0-.665.665.656.656,0,0,0,.655.643.634.634,0,0,0,.655-.644A.654.654,0,0,0,22.872,12.2ZM7.171-.123A.546.546,0,0,0,6.613.43a.553.553,0,1,0,1.106,0A.539.539,0,0,0,7.171-.123ZM24.119,9.234a.507.507,0,0,0-.493.488.494.494,0,0,0,.494.494.48.48,0,0,0,.487-.483A.491.491,0,0,0,24.119,9.234Zm-19.454,9.7a.5.5,0,0,0-.488-.488.491.491,0,0,0-.487.5.483.483,0,0,0,.491.479A.49.49,0,0,0,4.665,18.936Z\" transform=\"translate(0 0.123)\" fill=\"#f64060\"/>\n     </svg>\n   </a>\n\n   <a class=\"circle-link\" title=\"Join the Conversation on Gitter\" href=\"https://gitter.im/angular/angular\" target=\"_blank\" rel=\"noopener\">\n     <svg alt=\"Gitter Logo\" xmlns=\"http://www.w3.org/2000/svg\" width=\"19.447\" height=\"19.447\" viewBox=\"0 0 19.447 19.447\">\n       <g id=\"Group_40\" data-name=\"Group 40\" transform=\"translate(-1612 -405)\">\n         <rect id=\"Rectangle_19\" data-name=\"Rectangle 19\" width=\"19.447\" height=\"19.447\" transform=\"translate(1612 405)\" fill=\"#e60257\"/>\n         <g id=\"gitter\" transform=\"translate(1617.795 408.636)\">\n           <g id=\"Group_33\" data-name=\"Group 33\" transform=\"translate(0 0)\">\n             <rect id=\"Rectangle_15\" data-name=\"Rectangle 15\" width=\"1.04\" height=\"9.601\" transform=\"translate(2.304 2.324)\" fill=\"#fff\"/>\n             <rect id=\"Rectangle_16\" data-name=\"Rectangle 16\" width=\"1.04\" height=\"9.601\" transform=\"translate(4.607 2.324)\" fill=\"#fff\"/>\n             <rect id=\"Rectangle_17\" data-name=\"Rectangle 17\" width=\"1.04\" height=\"4.648\" transform=\"translate(6.91 2.324)\" fill=\"#fff\"/>\n             <rect id=\"Rectangle_18\" data-name=\"Rectangle 18\" width=\"1.04\" height=\"6.971\" transform=\"translate(0 0)\" fill=\"#fff\"/>\n           </g>\n         </g>\n       </g>\n     </svg>\n   </a>\n  </div>\n-->\n  <!-- Footer -->\n<!--\n  <footer>\n      Did you like OGITO?&nbsp;\n      <a href=\"https://github.com/angular/angular\" target=\"_blank\" rel=\"noopener\"> Give our repo a star.\n        <div class=\"github-star-badge\">\n            <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n          Star\n        </div>\n      </a>\n      <a href=\"ttps://github.com/rosaguilar/OGITO\" target=\"_blank\" rel=\"noopener\">\n        <svg class=\"material-icons\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\" fill=\"#1976d2\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>\n      </a>\n  </footer>\n  -->\n<!--\n  <svg id=\"clouds\" alt=\"Gray Clouds Background\" xmlns=\"http://www.w3.org/2000/svg\" width=\"2611.084\" height=\"485.677\" viewBox=\"0 0 2611.084 485.677\">\n    <path id=\"Path_39\" data-name=\"Path 39\" d=\"M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z\" transform=\"translate(142.69 -634.312)\" fill=\"#eee\"/>\n  </svg> -->\n\n <!-- </div> -->\n\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * The content above * * * * * * * * * * * -->\n<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->\n<!-- * * * * * * * * * * and can be replaced. * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n<!-- * * * * * * * * * * End of Placeholder * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n\n\n\n\n","import {BrowserModule, HammerModule} from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { MapComponent } from './map/map.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { HomeComponent } from './home/home.component';\nimport {DemoMaterialModule} from './material-module';\nimport { EditingToolbarComponent } from './editing-toolbar/editing-toolbar.component';\nimport { LayerPanelComponent } from './layer-panel/layer-panel.component';\nimport { SymbolListComponent } from './symbol-list/symbol-list.component';\nimport { ToolbarComponent } from './toolbar/toolbar.component';\nimport {FormsModule} from '@angular/forms';\nimport {HttpClientModule } from '@angular/common/http';\n@NgModule({\n  declarations: [\n    AppComponent,\n    MapComponent,\n    HomeComponent,\n    EditingToolbarComponent,\n    LayerPanelComponent,\n    SymbolListComponent,\n    ToolbarComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    BrowserAnimationsModule,\n    DemoMaterialModule,\n    FormsModule,\n    HammerModule,\n    HttpClientModule\n  ],\n  providers: [LayerPanelComponent],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {Observable, Subscription, of as observableOf, observable} from 'rxjs';\nimport {OpenLayersService} from '../open-layers.service';\nimport { MatIconRegistry } from \"@angular/material/icon\";\nimport {DomSanitizer} from \"@angular/platform-browser\";\nimport {observableToBeFn} from 'rxjs/internal/testing/TestScheduler';\nimport {MapQgsStyleService} from '../map-qgs-style.service';\n\n\n@Component({\n  selector: 'app-editing-toolbar',\n  templateUrl: './editing-toolbar.component.html',\n  styleUrls: ['./editing-toolbar.component.scss']\n})\nexport class EditingToolbarComponent implements OnInit {\n  @ViewChild('symbolList', { static: false })\n  symbolList?: ElementRef<HTMLElement>;\n  x = 0;\n  y = 0;\n  startX = 0;\n  startY = 0;\n  stopSave = false;\n  stopSaveAll = false;\n  isVisible$: Observable<boolean>;\n  layerTypeEdit$: string;  // type of geometry of the layer in editing\n  styles: any;\n  subsToShowEditToolbar: Subscription;\n  subsToGeomTypeEditing: Subscription;\n  actionActive = {\n    Point: false,\n    LineString: false,\n    Polygon: false,\n    Square: false,\n    Box: false,\n    Circle: false,\n    ModifyBox: false,  // it is translate with a box\n    Rotate: false,\n    Copy: false,\n    Identify: false,\n    Delete: false,\n    Measure: false\n  };\n  onPanStart(event: any): void {\n    this.startX = this.x;\n    this.startY = this.y;\n  }\n  onPan(event: any): void {\n    event.preventDefault();\n    this.x = this.startX + event.deltaX;\n    this.y = this.startY + event.deltaY;\n  }\n\nconstructor(iconRegistry: MatIconRegistry, sanitizer: DomSanitizer, private openLayersService: OpenLayersService) {\n  iconRegistry.addSvgIcon(\n    'add_line',\n    sanitizer.bypassSecurityTrustResourceUrl('assets/img/baseline-line-nodes-24px.svg')\n  );\n  iconRegistry.addSvgIcon(\n    'selectBoxFeature',\n    sanitizer.bypassSecurityTrustResourceUrl('assets/img/baseline-select-box2-24px.svg')\n  );\n  iconRegistry.addSvgIcon(\n    'add_poly',\n    sanitizer.bypassSecurityTrustResourceUrl('assets/img/add-poly-layer24px.svg')\n  );\n  iconRegistry.addSvgIcon(\n    'identify',\n    sanitizer.bypassSecurityTrustResourceUrl('assets/img/identify-24px.svg')\n  );\n  this.subsToShowEditToolbar = this.openLayersService.showEditToolbar$.subscribe(\n    (data) => {\n      this.showToolbar(data);\n    },\n    (error) => {console.log('Error in subscription to openLayersService.showEditToolbar$'); }\n  );\n  this.subsToGeomTypeEditing = this.openLayersService.layerEditing$.subscribe(\n    (data: any) => {\n      // console.log('data aqui', data);\n      this.updateLayerTypeEdit(data.layerGeom);\n    },\n    error => {\n      console.log('Error in subscription openLayersService.geomTypeEditing$');\n    }\n  );\n  }\n\n  closeEditingToolbar(){\n    this.isVisible$ = observableOf(false);\n  }\n\n  updateLayerTypeEdit(geomType){\n    /** Updates the observable layerTypeEdit$ that is used in the page to show editing symbols according to the\n     * geometry type of the layer\n     * @param geomType: string indicating the geometry type\n     */\n    this.layerTypeEdit$ = geomType;\n    // console.log('this.layerTypeEdit$', this.layerTypeEdit$);\n  }\n\n\n   drawingShapes(shapeType: any){\n     /**\n      *   Updates the observable in services to remove the interaction\n      */\n      if (true === this.actionActive[shapeType] ) {\n        // The layer was on editing\n        this.openLayersService.updateShapeEditType(null); //\n        this.showSymbolPanel(false);\n      }\n      else {\n        this.openLayersService.updateShapeEditType(shapeType);\n        this.showSymbolPanel(true);\n      }\n      this.highlightAction(shapeType);\n   }\n\n  highlightAction(action: string) {\n    // update the current action\n    this.actionActive[action] = !this.actionActive[action];\n    // change the rest of interactions to false\n    for (const key in this.actionActive ) {\n      // console.log(\"otra...this.actionActive[key]\",key,this.actionActive[key]);\n      if ((key !== action) && (true === this.actionActive[key]))\n      {\n        this.actionActive[key] = !this.actionActive[key];\n      }\n    }\n  }\n\n  startEditAction(action: string){\n    /**\n     * Select with a rectangle\n     */\n    if (true === this.actionActive[action]) {\n      // action was active --> it must be stopped\n      // console.log('que entra.. action', action, this.actionActive[action],true === this.actionActive[action]);\n      this.openLayersService.updateEditAction(null);\n    }\n    else {\n      this.openLayersService.updateEditAction(action);\n    }\n    // add an observable to control enable\n    // this.openLayersService.updateEditAction(action);\n    this.highlightAction(action);\n   }\n\n  // identifyFeatures(){\n    /**\n     * Identify Feautures, the user select element(s) and the information is retrieved\n     */\n  /*  alert(\"add Code to identify Features\");\n   }\n  copiarFeatures(){\n    /**\n     * Copiar Features, the user select element(s) and paste in the location when the click is released\n     */\n    //alert(\"add Code to copiar Features\");\n  /*}\n  rotateFeatures(){\n    /**\n     * Rotate\n     */\n   // alert(\"add Code to rotate Features\");\n  /*}\n  measureDistance(){\n    /**\n     * Measure Distance\n     */\n   /* alert(\"add Code to measure Distance\");\n  } */\n\n  showSymbolPanel(visible: boolean): void{\n    /**\n     * Updates the observable that allows to show/hide the symbolPanel\n     */\n    // #TODO add a validation to know if is visible or not?\n\n    this.openLayersService.updateShowSymbolPanel(visible);\n   }\n\n  deleteFeat(action: 'Delete'){\n    // #TODO remove the code was change to emit one event.\n    /**\n     * Updates the observable that allows to start deleting in the map,\n     * highlight the button and unselect the others\n     */\n    if (true === this.actionActive.Delete ) {\n      // The deleting was active\n      // console.log (\"stop interaction de delete\", this.actionActive['delete']);\n      this.openLayersService.updateDeleteFeats(false); //\n    }\n    else {\n      this.openLayersService.updateDeleteFeats(true);\n      console.log('first time here');\n    }\n    this.highlightAction('Delete');\n    }\n\n\n  saveLayer(){\n    /** Enable user to save edit in the layer being updated the observable to show the editing toolbar and\n     */\n    if (confirm('Do you want to save edits in the current layer:?')){\n      this.openLayersService.updateSaveCurrentLayer(true);\n      // disable the button\n      this.stopSave = true;\n      // add a timeout to enable the button\n      setTimeout(() => {\n        this.stopSave = false;\n      }, 10000);\n   }\n  }\n  saveAllLayer(){\n    alert('Add here the code to save all edits in all layers');\n    /** Enable user to save edit in all the layers\n     */\n    if (confirm('Do you want to save all the edits in the all layers:?')){\n     // this.openLayersService.updateSaveCurrentLayer(true);\n      // disable the button\n      this.stopSaveAll = true;\n      // add a timeout to enable the button\n      setTimeout(() => {\n        this.stopSaveAll = false;\n      }, 10000);\n    }\n  }\n  undoEdit(data){\n  }\n\n  ngOnInit(): void {\n    this.isVisible$ = observableOf(false);\n  }\n\n  showToolbar(visible: boolean){\n    /** Updates the observable to show the editing toolbar\n     *  @param visible: boolean\n     */\n  this.isVisible$ = observableOf(visible);\n  // desactivar todas las actions??\n  for (let key in this.actionActive ) {\n      // console.log(\"showing fresh tool ]\",key,this.actionActive[key]);\n      if (true === this.actionActive[key])\n      {\n        this.actionActive[key] = !this.actionActive[key];\n      }\n    }\n  }\n}\n","<!--suppress AngularUndefinedBinding -->  <!-- to fix a bug in webstorm -->\n<div class=\"editToolbar\"   *ngIf=\"isVisible$ | async\"  [style.left.px]=\"x\" [style.top.px]=\"y\"\n     (panstart)=\"onPanStart($event)\" (panmove)=\"onPan($event)\">\n<mat-card>\n   <mat-divider [vertical]=\"true\"></mat-divider>\n    <mat-toolbar>\n      <button   *ngIf= \" (layerTypeEdit$ == 'Point' || layerTypeEdit$ == 'Multi') \" mat-icon-button\n                (click)=\"drawingShapes('Point')\" matTooltip=\"Add point/marker\" [ngClass]=\"actionActive['Point'] ? 'active': 'normal'\">\n        <mat-icon>add_location</mat-icon>\n      </button>\n      <button mat-icon-button *ngIf=\"(layerTypeEdit$ == 'Line' || layerTypeEdit$ =='Multi' || layerTypeEdit$ == 'Polygon') \"\n              (click)=\"drawingShapes('LineString')\" matTooltip=\"Add line\" [ngClass]=\"actionActive['LineString'] ? 'active': 'normal'\">\n        <mat-icon    svgIcon=\"add_line\"></mat-icon>\n      </button>\n      <button *ngIf=\"(layerTypeEdit$ == 'Polygon' || layerTypeEdit$ == 'Multi') \" mat-icon-button\n              (click)=\"drawingShapes('Polygon')\" matTooltip=\"Add polygon\" [ngClass]=\"actionActive['Polygon'] ? 'active': 'normal'\">\n        <mat-icon svgIcon=\"add_poly\"></mat-icon>\n      </button>\n      <button *ngIf=\"(layerTypeEdit$ == 'Polygon' || layerTypeEdit$ == 'Multi') \" mat-icon-button\n              (click)=\"drawingShapes('Square')\" matTooltip=\"Add Square\" [ngClass]=\"actionActive['Square'] ? 'active': 'normal'\">\n        <mat-icon>crop_square</mat-icon>\n      </button>\n      <button *ngIf=\"(layerTypeEdit$ == 'Polygon' || layerTypeEdit$ == 'Multi') \" mat-icon-button\n              (click)=\"drawingShapes('Circle')\" matTooltip=\"Add Circle\" [ngClass]=\"actionActive['Circle'] ? 'active': 'normal'\">\n        <mat-icon>radio_button_unchecked</mat-icon>\n      </button>\n      <button mat-icon-button (click)=\"startEditAction('ModifyBox');showSymbolPanel(false);\" matTooltip=\"Select element(s)\"\n              [ngClass]=\"actionActive['ModifyBox'] ? 'active': 'normal'\" >\n        <mat-icon svgIcon=\"selectBoxFeature\"></mat-icon>\n      </button>\n      <button mat-icon-button (click)=\"startEditAction('Copy');showSymbolPanel(false)\" matTooltip=\"Copiar element(s)\"\n              [ngClass]=\"actionActive['Copy'] ? 'active': 'normal'\" >\n        <mat-icon>content_copy</mat-icon>\n      </button>\n      <button mat-icon-button (click)=\"startEditAction('Rotate');showSymbolPanel(false)\" matTooltip=\"Rotate element(s)\"\n              [ngClass]=\"actionActive['Rotate'] ? 'active': 'normal'\" >\n        <mat-icon>rotate_right</mat-icon>\n      </button>\n      <button mat-icon-button (click)=\"startEditAction('Measure');showSymbolPanel(false)\" matTooltip=\"Measure Distance\"\n              [ngClass]=\"actionActive['Measure'] ? 'active': 'normal'\" >\n        <mat-icon>straighten</mat-icon>\n      </button>\n\n      <button mat-icon-button (click)=\"startEditAction('Delete'); showSymbolPanel(false)\"  aria-label=\"delete\" matTooltip=\"Delete element\"\n              [ngClass]=\"actionActive['Delete'] ? 'active': 'normal'\">\n        <mat-icon>delete_forever</mat-icon>\n      </button>\n      <button mat-icon-button (click)=\"startEditAction('Identify');showSymbolPanel(false)\"  aria-label=\"identify\" matTooltip=\"Identify element\"\n              [ngClass]=\"actionActive['Identify'] ? 'active': 'normal'\">\n        <mat-icon svgIcon=\"identify\"></mat-icon>\n      </button>\n      <button mat-icon-button (click)=\"startEditAction('Identify');showSymbolPanel(false)\"  aria-label=\"identify\" matTooltip=\"Search in map\"\n              [ngClass]=\"actionActive['Search'] ? 'active': 'normal'\">\n        <mat-icon>search</mat-icon>\n      </button>\n      <button mat-icon-button aria-label=\"UndoLastEdit\" (click)=\"startEditAction('Undo');\" matTooltip=\"Undo\">\n        <mat-icon>undo</mat-icon>\n      </button>\n      <button mat-icon-button (click)=\"showSymbolPanel(true)\" matTooltip=\"Select/Change symbol\"\n              [ngClass]=\"actionActive['showSymbols'] ? 'active': 'normal'\">\n        <mat-icon   aria-label=\"\">category</mat-icon>\n      </button>\n      <button [disabled]=\"stopSave\" mat-icon-button (click)=\"saveLayer()\" matTooltip = \"Save all edits into the layers/disable pending #TODO\">\n        <mat-icon>save_alt</mat-icon>\n      </button>\n      <button  [disabled]=\"stopSaveAll\" mat-icon-button (click)=\"saveAllLayer()\" matTooltip = \"Save all edits in all layers\">\n        <mat-icon>save</mat-icon>\n      </button>\n      <span class = \"spacer\"></span>\n      <div class=\"divClosing\">\n        <button mat-mini-fab (click)=\"closeEditingToolbar()\" class=\"matCloseWrapper\" >\n          <mat-icon  class= \"closeIcon \">close</mat-icon>\n        </button>\n      </div>\n     </mat-toolbar>\n\n\n\n</mat-card>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n  openProject(){\n    console.log('add code to open a QGs Project');\n  }\n  showInfo(){\n    //alert(\"Aqui se muestra la info\");\n    alert(\"Your screen dimensions are: \" + screen.width + \"x\" + screen.height);\n  }\n  editSettings(){\n    // Here you can edit the project to be display\n    console.log('add code to edit settings, e.g., project to edit..');\n  }\n  exitToApp(){\n    confirm(\"Exiting app\");\n  }\n}\n","\n<div class=\"toolbarWrapper\">\n<!-- Toolbar -->\n\n  <div class=\"toolbar\" role=\"banner\">\n    <mat-toolbar color = \"primary\">\n\n    <button mat-icon-button   [matMenuTriggerFor]=\"myMenu\" aria-label=\"Menu\">\n      <mat-icon>menu</mat-icon>\n    </button>\n    <mat-menu  #myMenu=\"matMenu\">\n     <!-- <button mat-menu-item  (click)=\"openProject()\">\n        <mat-icon>folder_open</mat-icon>\n        <span>Open project</span>\n      </button> -->\n      <button mat-menu-item disabled (click) = \"editSettings()\">\n        <mat-icon>settings </mat-icon>\n        <span>Settings</span>\n      </button>\n      <button mat-menu-item (click)=\"showInfo()\">\n        <mat-icon>info </mat-icon>\n        <span>About</span>\n      </button>\n     </mat-menu>\n     <span class=\"title\">&nbsp;OGITO </span>\n     <span class=\"spacer\"></span>\n     <button mat-icon-button (click)=\"exitToApp()\">\n        <mat-icon> exit_to_app</mat-icon>\n     </button>\n     </mat-toolbar>\n   </div>\n<!--// here put the divs/cards and the design-->\n\n\n\n  <!--\n  <div class=\"terminal\" >\n    <span> Keeping alive to copy the style</span>\n  </div>\n-->\n</div>\n<app-map></app-map>\n<app-toolbar></app-toolbar>\n<app-editing-toolbar></app-editing-toolbar>\n<app-symbol-list></app-symbol-list>\n","import {Component, OnInit, Input, Output, SimpleChange, OnChanges, EventEmitter} from '@angular/core';\nimport {Observable, of as observableOf, Subject, Subscription} from 'rxjs';\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\nimport {OpenLayersService} from '../open-layers.service';\nimport {AppConfiguration} from '../app-configuration';\n\n@Component({\n  selector: 'app-layer-panel',\n  templateUrl: './layer-panel.component.html',\n  styleUrls: ['./layer-panel.component.scss']\n})\nexport class LayerPanelComponent implements OnInit {\n  @Input() editLayers: Array<any>;\n  @Output() layerVisClick = new EventEmitter<any>();   // emit an event when a layer is clicked in the list\n  @Output() editLayerClick = new EventEmitter<any>();   // emit an event when the edit button of a layer is clicked\n  @Output() layersOrder = new EventEmitter<any>();   // emit an event when layers were reordered (drop)\n  @Output() layersBackOrder = new EventEmitter<any>();  // emit an event when the order of base layers changes\n  @Output() layerBackVisClick = new EventEmitter<any>(); // emit an event when the edit button of a layer is clicked\n  x = 0;\n  y = 0;\n  startX = 0;\n  startY = 0;\n  selectedOptions = [];\n  layerActive:any;\n // preSelection = AppConfiguration.layerBaseList2.base_img.name; // ['name']];// 'OSM' The name\n//  editLayers = [['0'], ['1']];\n  baseLayers = []; // WMS layers as background; layers; too ?\n  showLayerPanel$: Observable<boolean>;\n  selectedLayersOptions$: Observable<any>;   // to keep the status of the layers in the layer panel\n\n\n\nconstructor(private openLayersService: OpenLayersService){}\n\n drop(event: CdkDragDrop<string[]>) {\n    /** Moves the layers in the panel after a drop gesture and emits a layersOrder event\n     * that is capture by the map component that effectively reorder the layers in the map.\n     * @param event --> cdkDragDrop event\n     */\n    moveItemInArray(this.editLayers, event.previousIndex, event.currentIndex);\n    this.layersOrder.emit(this.editLayers);\n   /* #TODO remove, this was changed because I used a child component.\n   this.openLayersService.updateOrderEditLayers(this.editLayers);\n    this.openLayersService.updateEditingLayer(this.editLayers[0]);  // debria ser true or false\n    this.openLayersService.updateShowEditTools(this.editLayers[0][2]); // pos 2 tiene el tipo\n    */\n  }\n  dropBase(event: CdkDragDrop<string[]>) {\n    moveItemInArray(this.baseLayers, event.previousIndex, event.currentIndex);\n    this.layersBackOrder.emit(this.baseLayers);\n  }\n\nngOnInit(): void {\n  this.showLayerPanel$ = observableOf(true);\n  }\n\n  onEditLayerClick($event: any, layer: any){\n  /** allows to start editing a particular layer in the layer panel\n   * @param $event for the future, doing nothing with it so far.\n   * @param item: item (layer) that was clicked on to start/stop editing\n   */\n  $event.preventDefault();\n  $event.stopImmediatePropagation();\n  console.log('que entra..getting better', $event, layer.layerName);\n  this.editLayerClick.emit(layer);  // with this the map should act accordingly to stop/start editing.\n    // tslint:disable-next-line:triple-equals\n  if (this.layerActive == layer.layerName) {\n    this.layerActive = null;\n    this.openLayersService.updateShowEditToolbar(false);\n  }\n  else {\n    this.layerActive = layer.layerName;\n  }\n}\ncloseLayerPanel(value: any) {\n  /** Updates the value of the observable $showLayerPanel$ that controls the layer Panel visibility\n   * @param value, type boolean\n   */\n  console.log(value);\n  this.showLayerPanel$ = observableOf(value);\n  }\n onPanStart(event: any): void {\n  /** Sets the current coordinates of the layerPanel to use later when setting a new position\n   * triggered when a pan event starts in the layerpanel card\n   * @param event, type event\n   */\n    this.startX = this.x;\n    this.startY = this.y;\n  }\nonPan(event: any): void {\n  /** Sets the new location of the layerPanel after a pan event was triggered in the layerPanel card\n   * @param event, type event\n   */\n    event.preventDefault();\n    this.x = this.startX + event.deltaX;\n    this.y = this.startY + event.deltaY;\n  }\n\n  onEditListChange($event, selectedList, options){\n    /**\n     * Updates layers order on the map. This is for editable layers\n     * @param $event: the event emitted\n     * @param selectedList: list of layers being selected to become visible\n     */\n    this.selectedOptions = selectedList.map(s => s.value);\n    console.log('sigo', this.selectedOptions);\n    // Actualizando las lista de las capas\n    //this.layerListChanged.emit(this.selectedOptions);  // emit the change\n    //console.log('que tiene this.layerListChanged ', this.layerListChanged);\n    // #TODO uncomment this.openLayersService.updateVisLayers(this.selectedOptions);\n    }\n\n  onBackListChange($event, selectedList){\n    /**\n     * Updates layers visibility on the map. This is for background layers\n     * @param $event: the event emitted\n     * @param selectedList: list of layers being selected to become visible\n     */\n    this.selectedOptions = selectedList.map(s => s.value);\n    console.log('sigo', this.selectedOptions);\n    // Actualizando las lista de las capas\n    this.layerBackVisClick.emit(this.selectedOptions);  // the order\n    // this.selectedOption =$event;\n  }\n\n  onLayerVisClick(  $event: any, layer: any){\n    /** This function emit an event to allow the map component to know that a layer was clicked\n     * @param $event: to stop event propagation\n     * @param layer: the layer that the user clicked on to show/hide\n     */\n    $event.preventDefault();\n    $event.stopImmediatePropagation();\n    this.layerVisClick.emit(layer);  // emit the change\n  }\n  onLayerBackVisClick(  $event: any, layer: any){\n    /** This function emit an event to allow the map component to know that a layer was clicked\n     * @param $event: to stop event propagation\n     * @param layer: the layer that the user clicked on to show/hide\n     */\n    $event.preventDefault();\n    $event.stopImmediatePropagation();\n    this.layerBackVisClick.emit(layer);  // emit the change\n  }\n}\n","<!--suppress AngularUndefinedBinding -->  <!-- to fix a bug in webstorm -->\n<div class =\"example-list\"   *ngIf=\"showLayerPanel$ | async\" [style.left.px]=\"x\" [style.top.px]=\"y\"\n     (panstart)=\"onPanStart($event)\" (panmove)=\"onPan($event)\">\n\n<mat-card class = 'layerPanelCard'>\n  <mat-card-title-group>\n      <mat-card-title class =\"panelTitle\">Layers  </mat-card-title>\n      <button mat-mini-fab   (click)=\"closeLayerPanel(false)\" class=\"matCloseWrapper\" >\n        <mat-icon  class= \"closeIcon\">close</mat-icon>\n      </button>\n  </mat-card-title-group>\n  <mat-divider class = \"toolbarDivider\"></mat-divider>\n   <div class=\"example-list-top\" cdkDropList (cdkDropListDropped)=\"drop($event)\">\n   <mat-selection-list #listElayer>\n      <mat-list-option class=\"example-box mat-primary\" *ngFor= \"let layer of editLayers\" [value]=\"layer['layerName']\"\n                       (click)=\"onLayerVisClick($event,layer)\" checkboxPosition=\"before\" cdkDrag\n                       [ngClass]=\"layerActive == layer['layerName']? 'active': 'normal'\">\n        <div class=\"selectList\">\n          <div style=\"display:flex;align-items:center\">\n          {{layer['layerTitle']}}\n          </div>\n          <div>\n            <button mat-icon-button (click)=\"onEditLayerClick($event, layer)\">\n              <mat-icon  class= \"editIcon\">edit</mat-icon>\n            </button>\n          </div>\n        </div>\n      </mat-list-option>\n  </mat-selection-list>\n  </div>\n\n  <mat-divider class = \"toolbarDivider\"></mat-divider>\n   <span>Background Layers</span>\n\n  <mat-selection-list   #sbLayers >\n   <!-- <span class = \"title-layer\">Citra satelit</span> -->\n    <div cdkDropList (cdkDropListDropped)=\"dropBase($event)\">\n      <!--\n     <ng-container   >\n\n       <mat-list-option class=\"example-box\" *ngFor= \"let layer of baseLayers\" [selected]=\"preSelection.indexOf(layer[0]) > -1\"\n                        [value]=\"layer[0]\" (click)=\"onLayerBackVisClick($event,layer)\"\n                        checkboxPosition=\"before\" cdkDrag>\n         {{layer[1]}}\n       </mat-list-option>\n     </ng-container>-->\n    </div>\n  </mat-selection-list>\n</mat-card>\n</div>\n","import { Injectable } from '@angular/core';\nimport CircleStyle from 'ol/style/Circle';\nimport {Fill, RegularShape, Stroke, Style, Icon, Text, Circle} from 'ol/style';\nimport {DEVICE_PIXEL_RATIO} from 'ol/has.js';\nimport {AppConfiguration} from './app-configuration';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapQgsStyleService {\n  /** Retrieves the styles for WFS layers in the Qgs project associated\n   *\n   */\n  svgFolder = AppConfiguration.svgFolder;\n  nodes = {};\n  canvas = document.createElement('canvas');\n  context = this.canvas.getContext('2d');\n  constructor() { }\n\n  findStyle(feature:any, layerName: any) {\n    /** Given a feature and the layerName it returns the corresponding style\n     * it is used to get the styles for WFS layers in the Qgs project associated\n     * @param { feature } the feature for which to find a rendering style  -- no needed apparently\n     * @param { layerName } the name of a WFS layer to be rendered\n     */\n    // console.log(\"layername in finding style\", layerName) ;\n    // const featType = feature.getGeometry().getType();\n    // here include a default value and styling for # resolution or just somethig reasonable\n    const styleLyr = this.nodes[layerName];\n    if (Object.keys(styleLyr).length > 0){\n      const attr = styleLyr[Object.keys(styleLyr)[0]][\"attr\"]; // Which is the attribute used in the simbology\n      const featValue = feature.get(attr);\n      for (let key of Object.getOwnPropertyNames(styleLyr))\n      {\n        if (styleLyr[key]['value'] == featValue){\n         // console.log (\"encontrado\",styleLyr[key]['style']);\n          return (styleLyr[key]['style']);    // and array of style is ok too\n        }\n      }\n    }\n  }\n\n  createLinePattern(fillColor:any, angle:number, spacing:number, line_width: number) {\n    const pixelRatio = DEVICE_PIXEL_RATIO;\n    this.canvas.width = 8 * pixelRatio;\n    this.canvas.height = 8 * pixelRatio;\n    this.context.fillStyle = 'rgba(255,255,255,0.8)';\n    this.context.beginPath();\n    this.context.fillRect(0, 0, this.canvas.width, this.canvas.width);  // just fill the pattern\n    this.context.fill();\n    // the stroke\n    this.context.beginPath();\n    switch (angle) {\n      case 45: {\n        this.context.moveTo(0, this.canvas.height);\n        this.context.lineTo(this.canvas.width, 0);\n        break;\n      }\n      case 90: {\n        this.context.moveTo(2, 0);\n        this.context.lineTo(2, this.canvas.height);\n        break;\n      }\n      case 135: {\n        this.context.moveTo(0, 0);\n        this.context.lineTo(this.canvas.width, this.canvas.height);\n        break;\n      }\n      case 180: {\n        this.context.moveTo(0, 0);\n        this.context.lineTo(this.canvas.width,0);\n        break;\n      }\n      default:\n        for (let i = 10; i < 200; i += 20)\n        {\n          this.context.moveTo(0, i);\n          this.context.lineTo(this.canvas.width, i);\n        }\n    }\n    this.context.lineWidth = line_width * 2;   // in qgis looks good but thinner in OL\n    this.context.strokeStyle = fillColor;\n    this.context.stroke();\n    this.context.fill();\n    const thePattern = this.context.createPattern(this.canvas, 'repeat');\n    return (thePattern);\n  }\n\n  getRGBAcolor(color: any, transparency: string = '1'){\n    /** takes a color and retunr in a rgba format used in OL\n     * @param color: string color as given in the qgs project file\n     * @param transparency: string containing de transparency from 0 to 1\n     * by default it put 1 as the transparency.\n     * return a string with the color in the rgba format\n     */\n    let rgbaColor = color .split(',');\n    rgbaColor = 'rgba('.concat(rgbaColor[0], ', ', rgbaColor[1], ', ', rgbaColor[2], ',', transparency , ')');\n    return(rgbaColor);\n  }\n\n  mapQgsSymbol(symType: any, symLyrCls: any, symAlpha: any, props: any){\n    /** Retrieves a OL style that is \"equivalent\" to the style described in a QGS project\n     * for now only categorized symbols are supported\n     * #TODO implement graduated symbols, it should not be hard\n     * @param {symType} type of symbol\n     * @param {symLyrCls} name of the symbol layer\n     * @param {symAlpha} value of the alfa layer for the symbol\n     * @param {props} name of the layer\n     * @returns {Olstyle} style in the format of a OL style (it could and array)e\n     */\n\n      let newStyle: any;\n      let color: string;\n      let outColor: string;\n      let stroke: any;\n      let fill: any;\n      let symText: any;\n      let symStyle = {};\n      for (let l = 0; l < props.length; l++) {\n        let propNode = props[l];\n        let clave = propNode.getAttribute('k');\n        let valor = propNode.getAttribute('v');\n        // console.log(\"que viene en symLyrCls\", symLyrCls);\n        symStyle[clave] = valor;\n      }\n      switch (symLyrCls) {\n        case \"SimpleFill\": {\n          stroke = new Stroke({\n            lineJoin: symStyle[\"joinstyle\"],\n            width: +symStyle[\"outline_width\"],\n          });\n          color = this.getRGBAcolor(symStyle[\"color\"], '0.7');\n          outColor = this.getRGBAcolor(symStyle[\"outline_color\"],'1');\n          stroke.setColor(outColor);\n          let fillStyle = symStyle[\"style\"];\n          switch (fillStyle)\n          {\n            case \"no\":{\n              newStyle = new Style({\n                stroke\n              });\n              break;\n            }\n            default: {\n              // by default fills the style\n              fill = new Fill({\n                color\n              });\n              newStyle = new Style({\n                stroke,\n                fill\n              });\n            }\n          }\n          break;\n        }\n        case 'LinePatternFill': {\n          stroke = new Stroke({\n            lineJoin: symStyle[\"joinstyle\"],\n            width: +symStyle[\"line_width\"],\n          });\n          color = this.getRGBAcolor(symStyle['color'],'0.7');\n          fill = new Fill();\n          let pattern = this.createLinePattern(color,+symStyle[\"angle\"] , symStyle[\"distance\"], +symStyle[\"line_width\"]); //\n          fill.setColor(pattern);\n          stroke.setColor(\"black\");\n          newStyle = new Style({\n            stroke,\n            fill\n          });\n          break;\n        }\n        case 'SimpleLine': {\n          let capStyle = symStyle[\"capstyle\"];\n          if (symStyle[\"capstyle\"] =='flat'){\n            capStyle ='butt'\n          }\n          let lineDash = '';\n          if (symStyle[\"use_custom_dash\"] == \"1\"){\n            lineDash = symStyle[\"customdash\"].split(\";\").map(Number);\n          }\n          color = this.getRGBAcolor(symStyle[\"line_color\"],'1');\n          stroke = new Stroke({\n            color: color,\n            lineCap: capStyle,    // symStyle[\"capstyle\"],\n            lineJoin: symStyle[\"joinstyle\"],\n            lineDash: lineDash,\n            lineDashOffset: symStyle[\"offset\"],\n            //miterLimit: symStyle[\"joinstyle\"],\n            width: +symStyle[\"line_width\"]\n          });\n          newStyle = new Style({\n            stroke: stroke\n          });\n          break;\n        }\n        case 'SimpleMarker': {\n          // console.log(\"THIS is NEEXXXXT\");\n          let offset = symStyle[\"offset\"].split(\",\");\n          color = this.getRGBAcolor(symStyle['color']);\n          outColor = this.getRGBAcolor(symStyle['outline_color']);\n          fill = new Fill({\n            color\n          });\n          stroke = new Stroke({\n            color: outColor,\n            lineJoin: symStyle['joinstyle'],\n            width: +symStyle ['outline_width'] * 2  // test *2\n          });\n          newStyle = new Style({\n            image: new CircleStyle({\n              radius: +symStyle['size']*2, // test *2 make it responsive..\n              fill,\n              stroke,\n            })\n          });\n          break;\n        }\n        case 'SvgMarker':\n        {\n        color = this.getRGBAcolor(symStyle['color']);   // this is symStyle[\"color\"]\n        outColor = this.getRGBAcolor(symStyle['outline_color']);\n        const filename = this.svgFolder.concat(symStyle['name']);\n        const size = symStyle['size'] ;\n        const  outlineWidth = +symStyle[\"outline_width\"];\n        const verticalAnchorPoint = symStyle['vertical_anchor_point'];\n        newStyle = new Style({\n           image: new Icon({\n             color,\n             crossOrigin: 'anonymous',\n             // imgSize: [50, 50],   // it was 20 #TODO responsive to zoom scale\n             scale: 0.03, // #TODO verificar size qgis/ol\n             src: filename })\n         });\n        // console.log('svgMarker in the case', newStyle);\n        break;\n        }\n        case 'FontMarker':\n          {\n\n          color = this.getRGBAcolor(symStyle['color']);\n          outColor = this.getRGBAcolor(symStyle['outline_color']);\n          stroke = new Stroke({\n            color,\n            lineJoin: symStyle['joinstyle'],\n            lineDashOffset: symStyle['offset'],\n            width: +symStyle[\"line_width\"]\n          });\n          let textBaseline ='top';\n          let offset = symStyle[\"offset\"].split(\",\");\n          let offsetY = offset[1];\n          if (symStyle[\"chr\"] ==\"o\" &&symStyle[\"font\"] ==\"Geosiana Desa\"){\n            offsetY = 2*19;\n            textBaseline = \"bottom\";\n            symStyle[\"chr\"] = '\\n'.concat(symStyle[\"chr\"]);\n          }\n          symText  = new Text({\n            font:   \"normal \".concat(symStyle[\"size\"], \"px \", symStyle[\"font\"]) ,    //symStyle[\"size\"]\n            offsetX: offset[0],\n            offsetY: offsetY, //offset[1],\n            textBaseline: textBaseline ,  // 'top' ,\n            // placement: ,   // lets keep the default that is point\n            scale: 2, //symStyle[\"size\"] ,\n            text: symStyle['chr'],\n            fill: new Fill({\n              color,   // equiv --> color:  color\n            }),\n          });\n          newStyle = new Style({\n            text: symText,\n            // stroke  # ? no se pq esta comentado?\n          });\n          break;\n        }\n        case 'FilledMarker': {\n          color = this.getRGBAcolor(symStyle['color']);\n          const size = symStyle['size'];\n          const scaleMethod = symStyle['diameter'];\n          const angle = symStyle['angle'];\n          fill = new Fill({color});\n          stroke = new Stroke({color: 'black', width: 2 });   //\n          switch (symStyle['name']) {\n            case 'star': {\n              newStyle = new Style({\n                image: new RegularShape({\n                fill,\n                stroke,\n                points: 5,\n                radius: size * 2,   // test * 2 #TODO make responsive\n                radius2: size,\n                angle: 0\n                })\n              });\n              break;\n            }\n            case 'cross_fill': {\n              newStyle = new Style({\n                image: new RegularShape({\n                  fill,\n                  stroke,\n                  points: 4,\n                  radius: size * 2,   // test * 2 #TODO make responsive\n                  radius2: 0,\n                  angle: 0\n                })\n              });\n              break;\n            }\n            case 'square': {\n              newStyle = new Style({\n                image: new RegularShape({\n                  fill,\n                  stroke,\n                  points: 4,\n                  radius: size * 2,   // test * 2 #TODO make responsive\n                  angle: Math.PI / 4\n                })\n              });\n              break;\n            }\n            case 'triangle': {\n              newStyle = new Style({\n                image: new RegularShape({\n                  fill,\n                  stroke,\n                  points: 3,\n                  radius: size * 2,   // test * 2 #TODO make responsive\n                  angle: 0\n                })\n              });\n              break;\n            }\n            default: {\n              // by default a x\n             newStyle = new Style({\n                image: new RegularShape({\n                  fill,\n                  stroke,\n                  points: 4,\n                  radius: 10,\n                  radius2: 0,\n                  angle: Math.PI / 4\n                })\n             });\n             break;\n            }\n          }\n          break;\n        }\n\n      }\n      return newStyle;\n  }\n\n\n  findDefaultStyleProvisional(geometry:any, layerName:any){\n    /** Retrieves a default style for a feature of the given geometry in the given layer\n     * This can be used to provide style for sketch layers..\n     * @param {geometry} geomtry type\n     * @param {layerName} name of the layer\n     * @returns {Style} default style to render the feature\n     */\n  }\n\n\n  createLayerStyles(layerName: string, xmlRendererV2: any){\n    /** Retrieves a default style for a feature of the given geometry in the given layer\n     * This function receives the content of the Xml project to parse it and get the symbology of each layer\n     * This is to avoid asking the user to fill the qml files per layer\n     * @param {xmlRendererV2} the portion of the xml related to styles - renderer-v2\n     * @returns {layerName} the name of the layerNames as keys and styles (symbology) as values\n     */\n    // console.log(`layerName ${ layerName }`);\n    let renderer = xmlRendererV2;\n    const symbolType = renderer.getAttribute(\"type\");\n    // const symbols = renderer.getElementsByTagName('symbols')[0];\n    if (symbolType == \"categorizedSymbol\") {\n      const attr = renderer.getAttribute('attr').split(\".\")[0];\n      let categories = renderer.getElementsByTagName(\"categories\");  // aqui tengo el id era el [1].\n      // console.log('cuantos valores', categories[0].children.length);\n      let tnodes = {};\n      for (let i = 0; i < categories[0].children.length; i++) {\n        let node = renderer.getElementsByTagName(\"category\")[i];\n        let label = node.getAttribute(\"label\");\n        let symbol = node.getAttribute(\"symbol\");\n        let value = node.getAttribute(\"value\");\n        // here, loading the different classes\n        if (value.length > 0) {\n          tnodes[symbol] = {\n            \"attr\": attr,\n            \"value\": value,\n            \"label\": label,\n            \"symbol\": symbol,\n            \"style\": \"\"\n          };\n        }\n      }\n      let symbols = renderer.getElementsByTagName(\"symbols\")[0];  // aqui tengo el id era el [1].\n      let syms = symbols.getElementsByTagName(\"symbol\");\n      for (let j = 0; j < syms.length; j++) {\n        let symNode = syms[j];\n        let symAlpha = symNode.getAttribute(\"alpha\");\n        let symName = symNode.getAttribute(\"name\"); // here is the real value of the symbol\n        let symType = symNode.getAttribute(\"type\");\n        if (tnodes.hasOwnProperty(symName))\n        {\n\n          let layers = symNode.getElementsByTagName(\"layer\");\n          let olStyleLst = [];\n          for (let l = 0; l < layers.length; l++) {\n            let symLyrCls = symNode.getElementsByTagName(\"layer\")[l].getAttribute(\"class\");\n            let props = symNode.getElementsByTagName(\"layer\")[l].getElementsByTagName(\"prop\");\n            let olStyle = this.mapQgsSymbol(symType, symLyrCls, symAlpha, props);  // #TODO add symbol inside filledMarker\n            if (olStyle) {\n              olStyleLst.push(olStyle);\n              tnodes[symName][\"symLyrCls\"] = symLyrCls;\n\n            }\n          }\n          if (olStyleLst.length > 1){\n            // switch the order of the styles   #TODO check if needed\n            let olStyleLst2 = [];\n            for (let s = 0; s < olStyleLst.length; s++){\n              olStyleLst2.push(olStyleLst[olStyleLst.length - 1 - s]); }\n             // olStyleLst = olStyleLst2;\n          }\n          tnodes[symName].style = olStyleLst;   // using the tnodes[symName].style is te same than tnodes[symName][\"style\"]\n          tnodes[symName].alpha = symAlpha;\n          tnodes[symName].type = symType;\n        }\n      }\n\n      this.nodes [layerName] = tnodes;\n    }\n    else if (symbolType == \"graduatedSymbol\") {\n      // For future versions  graduated color, this also includes\n      // SVG icons\n    }\n    else if (symbolType == \"singleSymbol\")  {\n      // For future versions  unique symbol, this also includes\n      // SVG icons\n      }\n\n  }\n  getLayerStyle(layerName: string){\n    /** return the style for a layer\n     * @param layername: string, the name of the layer\n     */\n    if (this.nodes[layerName]){\n      // console.log(\"consigue algo?\",this.nodes[layerName] );\n      return this.nodes[layerName];\n    }\n  }\n  getLayerStyles(){\n    /** Return the styles for all the layers\n     *  #TODO verify if is useful or not. apparently is not being used.\n     */\n    if (this.nodes){\n      return (this.nodes);\n    }\n    return null;\n  }\n\n}\n","import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {Subscription} from 'rxjs';\nimport {AppConfiguration} from '../app-configuration';\nimport 'ol/ol.css';\nimport {Map, View} from 'ol';\nimport {getDistance} from 'ol/sphere';\nimport {transform} from 'ol/proj';\nimport proj4 from 'proj4';\nimport {register} from 'ol/proj/proj4';\nimport Projection from 'ol/proj/Projection';\nimport VectorSource from 'ol/source/Vector';\nimport VectorLayer from 'ol/layer/Vector';\nimport TileLayer from 'ol/layer/Tile';\nimport OSM from 'ol/source/OSM';\nimport WMSCapabilities from 'ol/format/WMScapabilities.js';\nimport Overlay from 'ol/Overlay';\nimport {defaults as defaultInteractions, DragAndDrop, Draw, Modify, Select, Snap, DragBox} from 'ol/interaction';\nimport {Translate, DragPan, DragRotate, DragZoom, PinchZoom, PinchRotate} from 'ol/interaction';\nimport Point from 'ol/geom/Point';\nimport {Fill, Stroke, Style} from 'ol/style';\nimport CircleStyle from 'ol/style/Circle';\nimport {GeoJSON, KML} from 'ol/format';\nimport ZoomSlider from 'ol/control/ZoomSlider';\nimport ScaleLine from 'ol/control/ScaleLine';\nimport {Polygon} from 'ol/geom';\nimport {fromCircle} from 'ol/geom/Polygon';\nimport {OpenLayersService} from '../open-layers.service';\nimport {MapQgsStyleService} from '../map-qgs-style.service';\nimport WFS from 'ol/format/WFS';\nimport GML from 'ol/format/GML';\nimport {click} from 'ol/events/condition.js';\n\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.scss']\n})\n\nexport class MapComponent implements OnInit, OnDestroy {\n  public existingProject = true;\n  map: Map;\n  view: View;\n  srsID: any;  // ID of the SRS to be used in the map View\n  wgs84ID = 'EPSG:4326';\n  projectTitle: string;\n  mapCanvasExtent: any;\n  BBOX: any;\n  mapCenterXY: number[] = [0, 0];   // the center of the map in the project EPSG coordinates\n  projectProjection: Projection;\n  mapZoom: number = AppConfiguration.mapZoom;\n  fieldWFSLayers = {};\n  layerStyles = {};\n  selectStyle: any;\n  // map interactions\n  draw: any;\n  snap: any;\n  modify: any;\n  select: any = null;\n  translate: any;\n  pinchZoom: any;\n  pinchRotate: any;\n  dragPan: any;\n  dragRotate: any;\n  dragZoom: any;\n  dragBox: any;\n  dragAndDropInteraction: any;\n  loadedWfsLayers = []; // [{layerName: 'uno', layerTitle: 'Layer 1'}, {layerName: 'dos', layerTitle: 'layer 2'}];\n  curEditingLayer = null;\n  cacheFeatures = [];\n  canBeUndo = false;\n  editBuffer = [];   // Try one array for everything.\n  // cacheBuffer = [];\n  // editSketchBuffer = []; // #TDOD remove?\n  layersGeometryType = {};\n  layersOrder = [];\n  featId = 1000;   // to have an internal identifier for features when editing\n  private currentStyle: any;\n  private currentClass: any;\n  measureTooltipElement: any;\n  measureTooltip: any;\n  subsToShapeEdit: Subscription;\n  subsTocurrentSymbol: Subscription;\n  subsToSaveCurrentLayer: Subscription;\n  subsToZoomHome: Subscription;\n\n  constructor( private mapQgsStyleService: MapQgsStyleService,\n               private  openLayersService: OpenLayersService) {\n\n    this.subsToShapeEdit = this.openLayersService.shapeEditType$.subscribe(\n      data => {\n        if (data != null){\n          this.enableAddShape(data);\n        }\n        else {\n         this.removeInteractions();   // remove drawingInteractions\n        }\n\n      },\n      error => { console.log('Error in shapeEditType', error); }\n    );\n    this.subsTocurrentSymbol = this.openLayersService.currentSymbol$.subscribe(\n      style => {\n        this.changeSymbol(style);\n      },\n      error => {\n        console.log('Error changing the style for drawing elements', error);\n        alert('Error changing the style, select a symbol');\n      }\n    );\n    this.subsToSaveCurrentLayer = this.openLayersService.saveCurrentLayer$.subscribe(\n     data => {\n       console.log('que entra de la subscription...', data);\n       if (data) {                                    // (data) is equivalent to (data === true)\n         this.saveEdits(this.curEditingLayer);\n       }}\n     ,\n       error => alert('Error saving layer ' + error)\n     );\n    this.subsToZoomHome = this.openLayersService.zoomHome$.subscribe(\n     data => {\n      if (data) {\n        this.zoomToHome();\n      }\n     },\n      error => alert (\"Error starting zooming Home\" + error)\n    );\n    /*this.openLayersService.deleteFeats$.subscribe(\n      data => {\n        console.log('que viene', data);\n        this.removeInteractions();\n        if (true === data) {\n          this.startDeleting();\n        }\n      },\n      error => alert('Error deleting features' + error)\n    ); */\n\n    this.openLayersService.editAction$.subscribe(\n      // starts an action and stop the others..is this ready with stop interactions?\n    data => {\n    console.log('que viene', data);\n    this.removeInteractions();\n    if (data === null) {\n      return;\n    }\n    switch (data){\n      case 'ModifyBox': {\n        this.startTranslating();\n        break;\n      }\n      case 'Rotate':\n        {\n          this.startRotating();\n          break;\n        }\n      case 'Copy':\n        {\n          this.startCopying();\n          break;\n        }\n      case 'Identify':\n        {\n          this.startIdentifying();\n          break;\n        }\n      case 'Delete':\n        {\n          this.startDeleting();\n          break;\n        }\n      case 'Measure':\n        {\n          this.startMeasuring();\n          break;\n        }\n      case 'Undo':\n      {\n        this.undoLastEdit();\n        break;\n      }\n      }\n  },\n  error => alert('Error implementing action on features' + error)\n  );\n  }\n\n  ngOnInit(): void {\n    // initialize the map\n    this.initializeMap();\n   // read the project\n    const qgsProject = this.readProjectFile(AppConfiguration.curProject);\n    qgsProject.then(\n     data => {\n       this.parseProject(data);\n       this.updateMapView();  // uses the projection of the project file and extent to get a center\n       this.workQgsProject();\n       this.existingProject = true;\n       this.openLayersService.updateExistingProject(this.existingProject);\n       },\n      error  => {\n        this.loadDefaultMap();\n        console.log ('There is an error retrieving the qGis project of the application, please check the configuration');\n      }\n    );\n  }\n\n\n  changeSymbol(style: any){\n    this.currentStyle = style.value;\n    this.currentClass = style.key;\n   // console.log('current class and Style', style, this.currentClass, this.currentStyle );\n  }\n  initializeMap(){\n    // customized pinch interactions\n    this.pinchZoom = new PinchZoom ({constrainResolution: true});\n    this.pinchRotate = new PinchRotate({constrainResolution: true});\n    this.dragPan = new DragPan();\n    this.dragRotate = new DragRotate();\n    this.dragZoom = new DragZoom();\n\n    //\n    this.dragAndDropInteraction = new DragAndDrop({\n      formatConstructors: [\n        GeoJSON,\n        KML,\n      ]\n    });\n    this.map = new Map({\n      layers: [\n        new TileLayer({\n          source: new OSM({\n            crossOrigin: null\n          })\n        }),\n      ],\n      interactions: defaultInteractions ({pinchZoom: false, pinchRotate: false})\n        .extend([this.dragAndDropInteraction, this.pinchRotate, this.pinchZoom, this.dragRotate, this.dragZoom]),\n      target: 'map',\n      view: new View({\n        projection: 'EPSG:3857',\n        center: [0, 0],\n        zoom: 3\n      })\n    });\n    // initialize the select style\n    this.selectStyle = new Style({\n      stroke: new Stroke({ color: 'rgba(255, 154, 131,0.9)', width: 2, lineDash: [5, 2] }),    // #EE266D\n      fill: new Fill({color: 'rgba(234, 240, 216, 0.8)'}),   // 'rgba(0, 0, 0, 0.01)'\n      image: new CircleStyle({radius: 7,\n        fill: new Fill({color: 'rgba(255, 154, 131, 0.1)'}),\n        stroke: new Stroke({color: '#EE266D', width: 2, lineDash: [8, 5]})\n      })\n    });\n  }\n  createMeasureTooltip() {\n    if (this.measureTooltipElement) {\n      this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement);\n    }\n    this.measureTooltipElement = document.createElement('div');\n    this.measureTooltipElement.className = 'tooltip tooltip-measure';\n    this.measureTooltip = new Overlay({\n      element: this.measureTooltipElement,\n      offset: [0, -15],\n      positioning: 'bottom-center'\n    });\n    this.map.addOverlay(this.measureTooltip);\n  }\n\n  updateMapView(){\n    /** Uses the map extent and projection written in the Qgs project (this.mapCanvasExtent [xmin, xmax, ymin, ymax])\n     * to update the mapView after the map initialization.\n     *  To do that creates to point and calculate the center.\n     */\n      // get a center for the map\n    const leftMinCorner = new Point([this.mapCanvasExtent[0], this.mapCanvasExtent[2]]);\n    const rightMinCorner = new Point([this.mapCanvasExtent[1], this.mapCanvasExtent[3]]);\n    const leftMaxCorner = new Point([this.mapCanvasExtent[0], this.mapCanvasExtent[3]]);\n   // console.log ('extent and puntos', this.mapCanvasExtent, leftMinCorner.getCoordinates(),\n   //   rightMinCorner.getCoordinates(), leftMaxCorner.getCoordinates());\n    const hDistance = getDistance(transform(leftMinCorner.getCoordinates(), this.srsID, this.wgs84ID),\n                                  transform(rightMinCorner.getCoordinates(), this.srsID, this.wgs84ID));\n    const vDistance = getDistance(transform(leftMinCorner.getCoordinates(), this.srsID, this.wgs84ID),\n                                  transform(leftMaxCorner.getCoordinates(), this.srsID, this.wgs84ID));\n    this.mapCenterXY = [this.mapCanvasExtent[0] + hDistance / 2, this.mapCanvasExtent[2] + vDistance / 2];\n    // #TODO this works with projected coordinates --> check for others\n    this.view = new View({\n        center:  [this.mapCenterXY[0], this.mapCenterXY[1]],  // [-66,10] ,\n        // extent: this.mapCanvasExtent, // not sure if this will prevent the draggig outside the extent.\n        zoom: AppConfiguration.mapZoom, // this.mapZoom,\n        minZoom: AppConfiguration.minZoom,\n        maxZoom: AppConfiguration.maxZoom,\n        projection: this.srsID // this.projectProjection // 'EPSG:4326'\n      });\n    this.map.setView(this.view);\n    // this.view.fit(this.mapCanvasExtent);\n    this.map.addControl(new ZoomSlider());\n    this.map.addControl(new ScaleLine());\n    this.map.on('touchstart', function(e){\n      console.log('length', e.touches.length);\n    });\n    // console.log('this.view.getCenter', this.view.getCenter(), this.view.getProjection(), this.view.calculateExtent());\n  }\n  zoomToHome() {\n   /**\n    * Centers the map canvas view to the center and zoom specified in the Qgsprojec file extent and the appConfiguration\n    */\n    console.log('que entra zoomtoHome', [this.mapCenterXY[0], this.mapCenterXY[1]]);\n    this.map.getView().setRotation(0);\n    this.map.getView().setZoom (AppConfiguration.mapZoom);\n    this.map.getView().setCenter([this.mapCenterXY[0], this.mapCenterXY[1]]);\n  }\n  workQgsProject() {\n    /** Retrieves the capabilities WFS and WMS associated to the qgis project listed in AppConfiguration\n     * it send these capabilities to other functions to load the WMS and WFS layers\n     */\n    // request getCapabilities to load WMS images\n    const qGsProject = AppConfiguration.QgsFileProject;\n    const qGsServerUrl = AppConfiguration.qGsServerUrl;\n    // console.log(\"qGsServerUrl\",qGsServerUrl)\n    const wmsVersion = 'SERVICE=WMS&VERSION=' + AppConfiguration.wmsVersion;\n    const capRequest = '&REQUEST=GetCapabilities&map=';\n    const urlWMS = qGsServerUrl + wmsVersion + capRequest + qGsProject;\n    let parser: any;\n    // console.log('urlWMS', urlWMS);\n    parser = new WMSCapabilities;\n    const self = this;\n    const resultXml = fetch(urlWMS)\n      .then(response => {\n        return response.text();\n      })\n      .then(text => {\n        const xmlWMS = parser.read(text);\n        self.loadWMSlayers(xmlWMS);\n        return (xmlWMS);\n      })\n      .catch(error => console.error(error));\n\n    // now go to the WFS\n    const wfsVersion = 'SERVICE=WFS&VERSION=' + AppConfiguration.wfsVersion;\n    const urlWFS = qGsServerUrl + wfsVersion + capRequest + qGsProject;\n    // console.log('urlWFS', urlWFS);\n    const resultWfs = fetch(urlWFS)\n      .then(response => response.text())\n      .then(text => {\n        // console.log('result WFS Cap para continuar', text);\n        self.loadWFSlayers(text);\n        // self.layerPanel.updateLayerList(self.loadedWfsLayers);   // trying another approach with input\n        return (text);\n      })\n      .catch(error => console.error(error));\n\n    }\n\n  parseProject(qgsfile: string) {\n    /** uses the xml text of qgs project file listed in AppConfiguration to load\n     * it send part of the xml text to other functions to load part of the project\n     * 1. A dictionary of layer styles\n     * 2. A dictionary with the layer geometries\n     *\n     */\n    const fieldLayers = {};\n    const xmlParser = new DOMParser();\n    const xmlText = xmlParser.parseFromString(qgsfile, 'text/xml');\n    // console.log (\"xmlText\", xmlText);\n    this.projectTitle = xmlText.getElementsByTagName('title')[0].childNodes[0].nodeValue;\n    // register the project projection definion in proj4 format\n    const projectionDef = xmlText.getElementsByTagName('proj4')[0].childNodes[0].nodeValue;\n    this.srsID = xmlText.getElementsByTagName('authid')[0].childNodes[0].nodeValue;\n    proj4.defs(this.srsID, projectionDef);\n    register(proj4);\n    const mapcanvas = xmlText.getElementsByTagName('mapcanvas')[0];\n    const units = mapcanvas.getElementsByTagName('units')[0].childNodes[0].nodeValue;\n    const extent = mapcanvas.getElementsByTagName('extent')[0];\n    const xmin = Number(extent.getElementsByTagName('xmin')[0].childNodes[0].nodeValue);\n    const xmax = Number(extent.getElementsByTagName('xmax')[0].childNodes[0].nodeValue);\n    const ymin = Number(extent.getElementsByTagName('ymin')[0].childNodes[0].nodeValue);\n    const ymax = Number(extent.getElementsByTagName('ymax')[0].childNodes[0].nodeValue);\n    // console.log(`xmin xmax ymin ymax ${ xmin } ${ xmax } ${ ymin } ${ ymax } `);\n    // extent [minx, miny, maxx, maxy].\n    this.mapCanvasExtent = [xmin, xmax, ymin, ymax];\n    const projectionWKT = xmlText.getElementsByTagName('wkt');\n    if (projectionWKT.length > 0 ) {\n      const projectWKT = xmlText.getElementsByTagName('wkt')[0].childNodes[0].nodeValue\n        .replace('PROJCRS', 'PROJCS');\n      const m = projectWKT.indexOf('[', projectWKT.indexOf('BBOX'));\n      const n = projectWKT.indexOf(']', m);\n      const bbox = projectWKT.slice(m + 1, n).split(',');\n      this.BBOX = [Number(bbox[0]), Number(bbox[1]), Number(bbox[2]), Number(bbox[3])];\n      // console.log(`bbox ${ this.BBOX }`);\n    }\n    else {\n      this.BBOX = this.mapCanvasExtent;\n    }\n    this.projectProjection = new Projection({\n        code: this.srsID,\n        extent: this.BBOX,\n    });\n    const layerTreeGroup = xmlText.getElementsByTagName('layer-tree-group')[0];\n    // get the order in which layers are rendered\n    const nLayers = layerTreeGroup.getElementsByTagName('layer-tree-layer').length;\n    for (let i = 0; i < nLayers; i++) {\n      const node = layerTreeGroup.getElementsByTagName('layer-tree-layer')[i];\n      const layerName = node.getAttribute('name');\n      this.layersOrder.push(layerName); // #TODO evaluate if this is needed or worthy, it is not being used somewhere else\n     }\n    // get the map layers and symbology\n    const legendGroups = {};\n    for (let i = 0; i < xmlText.getElementsByTagName('legendgroup').length; i++) {\n        const legendGroup =  xmlText.getElementsByTagName('legendgroup')[i];\n        const groupName = legendGroup.getAttribute('name');\n        // console.log('groupName', groupName);\n        const layersinGroup = [];\n        for (let j = 0; j < legendGroup.getElementsByTagName('legendlayer').length; j++)\n        {\n          const layerInGroup =  legendGroup.getElementsByTagName('legendlayer')[j].getAttribute('name');\n          // console.log('layerInGroup', layerInGroup);\n          layersinGroup.push(layerInGroup);\n        }\n        legendGroups[groupName] = layersinGroup;\n    }\n    // #TODO implement something with the groups in the legend\n    const mapLayersLst = xmlText.getElementsByTagName('maplayer');\n    for (let i = 0; i < mapLayersLst.length; i++) {\n      const lyr = xmlText.getElementsByTagName('maplayer')[i];\n      const layerName = lyr.getElementsByTagName('layername')[0].childNodes[0].nodeValue;\n      const layerGeom = lyr.getAttribute('geometry');\n      this.layersGeometryType[layerName] = {layerName, layerGeom};\n      const renderer = lyr.getElementsByTagName('renderer-v2')[0];\n      // create the OL style for the renderer\n      if (renderer) {\n        this.mapQgsStyleService.createLayerStyles(layerName, renderer);\n      }\n      // get the fields, what to do with no-editable fields in QGIS?\n      // preferred option is not to edit or input data via keyboard, just select icons oas osm\n      const fieldLst = {};\n      const fieldsConf = lyr.getElementsByTagName('fieldConfiguration')[0];\n      if (fieldsConf) {\n        for (let k = 0; k < fieldsConf.children.length; k++) {\n          const field = lyr.getElementsByTagName('field')[k];\n          const fieldName = field.getAttribute('name');\n          fieldLst[fieldName] = field.getElementsByTagName('editWidget')[0].getAttribute('type');\n        }\n        fieldLayers [layerName] = fieldLst;\n      }\n    }\n    // console.log('fields of layer', fieldLayers);\n    // console.log('this.layersGeometryType', this.layersGeometryType);  // #TODO not sure if this is worthy layers migth be not published..\n    this.fieldWFSLayers = fieldLayers;\n    this.layerStyles = this.mapQgsStyleService.getLayerStyles(); // need to check if this is working well;\n    // console.log(this.layerStyles);\n  }\n  loadWMSlayers(XmlCapText){\n    // This function load the layers in the QGS project from a OL xmlCapabilities file\n   // console.log('Entra WMS', XmlCapText);\n  }\n  getEditingStyle(){\n    const editingstyle = [\n      new Style({\n        fill: new Fill({\n          color: 'rgba(153, 202, 255, 0.5)'\n        }),\n        stroke: new Stroke({\n          color: 'blue',\n          width: 2,\n          lineDash: [8, 10]\n        }),\n        image: this.imageCircle(15)\n      }),\n      new Style({\n        image: this.imageCircle(10)\n      }),\n      new Style({\n        image: this.imageCircle(5)\n      })\n    ];\n    return editingstyle;\n  }\n  imageCircle(radius) {\n    return new CircleStyle({\n      stroke: new Stroke({\n        color: 'red', width: 2\n      }),\n      radius  // equivale a radius: radius\n    });\n  }\n  enableAddShape(shape: string) {\n    /** enable the map to draw shape of the Shapetype\n     * @param shape: string, type of shape to add e.g., 'POINT', 'LINE', 'CIRCLE'\n     */\n      // previously addShapeToLayer check the API OL\n      // console.log ('shape', shape, this.curEditingLayer);\n    const self = this;\n    if (!this.curEditingLayer) {\n      alert('No layer selected to edit');\n      return;\n    }\n    /*  commented on 23/06\n    let tsource: any = null;\n    this.map.getLayers().forEach(\n      layer => {\n        if (layer.get('name') === self.curEditingLayer.layerName) {\n          tsource = layer.getSource();\n          // console.log('Finds the current layer to add shapes', tsource);\n        }\n      }); */\n    const tsource = this.curEditingLayer.source;\n    // console.log('Finds the current layer to add shapes', this.curEditingLayer, tsource);\n    let type: any;\n    let geometryFunction: any;\n    // deactivate tany interaction? or remove?\n    this.removeInteractions();  // remove select, modify, delete interactions\n    try {\n      // this.cacheFeatures = [];  // to remove whatever is there and only undo the last action\n      switch (shape) {\n        case 'Point': {\n          this.draw = new Draw({\n            source: tsource,\n            type: shape,\n            freehand: false,\n            stopClick: true,    // not clicks events will be fired when drawing points..\n            style: this.getEditingStyle()\n          });\n          this.removeDragPinchInteractions();  // a ver si el mapa deja de moverse cuando se dibuja\n          break;\n        }\n        case 'LineString': {\n          this.draw = new Draw({\n            source: tsource,\n            type: shape,\n            freehand: true,\n            stopClick: true,    // not clicks events will be fired when drawing points..\n            style: this.getEditingStyle(),\n            condition: olBrowserEvent => {\n              if (olBrowserEvent.originalEvent.touches) {\n                console.log('tocuhes legth', olBrowserEvent.originalEvent.touches.length);\n                return olBrowserEvent.originalEvent.touches.length < 2;\n              }   // dibuja si hay menos de undos dedos..--> mo working\n              return false;\n            }\n          });\n          this.removeDragPinchInteractions();  // to fix the zig zag lines #TODO test it\n          break;\n        }\n        case 'Polygon': {\n          this.draw = new Draw({\n            source: tsource,\n            type: shape,\n            freehand: true,\n            stopClick: true,    // not clicks events will be fired when drawing points..\n            style: this.getEditingStyle(),\n            condition: olBrowserEvent => {\n              if (olBrowserEvent.originalEvent.touches) {\n                return olBrowserEvent.originalEvent.touches.length < 2;\n              }   // dibuja si hay menos de undos dedos..--> mo working\n              return false;\n            }\n          });\n          break;\n        }\n        case 'Square': {\n          this.draw = new Draw({  // #TODO change code\n            source: tsource,\n            type: shape,\n            freehand: true,\n            stopClick: true,    // not clicks events will be fired when drawing points..\n            style: this.getEditingStyle(),\n            condition: olBrowserEvent => {\n              if (olBrowserEvent.originalEvent.touches) {\n                return olBrowserEvent.originalEvent.touches.length < 2;\n              }   // dibuja si hay menos de undos dedos..--> mo working\n              return false;\n            }\n          });\n          break;\n        }\n        case 'Circle': {   // #TODO change code\n          this.draw = new Draw({\n            source: tsource,\n            type: shape,\n            freehand: true,\n            stopClick: true,    // not clicks events will be fired when drawing points..\n            style: this.getEditingStyle(),\n            condition: olBrowserEvent => {\n              if (olBrowserEvent.originalEvent.touches) {\n                return olBrowserEvent.originalEvent.touches.length < 2;\n              }   // dibuja si hay menos de undos dedos..--> mo working\n              return false;\n            }\n          });\n          break;\n        }\n      }\n      this.map.addInteraction(this.draw);\n      // adding snap interaction always after th draw interaction\n      this.snap = new Snap({\n        source: tsource\n      });\n      this.map.addInteraction(this.snap);\n      this.createMeasureTooltip();\n      let listener;\n      this.draw.on('drawstart', function(evt) {\n        const sketch = evt.feature;\n        let tooltipCoord = evt.coordinate;\n        listener = sketch.getGeometry().on('change', evt => {\n          const geom = evt.target;\n          let output;\n          // show the tooltip only when drawing polys\n          if (self.draw.type_ === 'LineString' && self.curEditingLayer.geometry === 'Polygon') {  // self.curEditingLayer[2]\n            //    let geom = e.feature.getProperties().geometry;\n            const last = geom.getLastCoordinate();\n            const first = geom.getFirstCoordinate();\n            const sourceProj = self.map.getView().getProjection();\n            const distance = getDistance(transform(first, sourceProj, 'EPSG:4326'), transform(last, sourceProj, 'EPSG:4326'));\n            // # TODO aqui revisar el buffer y lo demas.\n            if (distance < AppConfiguration.threshold) {\n              output = (Math.round(distance * 100) / 100) + ' ' + 'm';  // round to 2 decimal places\n              tooltipCoord = geom.getFirstCoordinate();\n              self.measureTooltipElement.innerHTML = output;\n              self.measureTooltip.setPosition(tooltipCoord);\n            }\n          }\n        });\n      });\n\n      this.draw.on('drawend', (e: any) => {\n        // adding an temporal ID, to handle undo\n        e.feature.setId(this.curEditingLayer.layerName.concat('.', String(this.featId)));\n        this.featId = this.featId + 1;\n        // setting the class to set a style\n        if (this.currentClass) {\n          e.feature.set('class', this.currentClass);\n        } else {\n          alert('Select a symbol');\n          return;  // #TODO check this\n        }\n        // console.log('feat', e.feature, e.feature.getStyle());\n        // correct geometry when drawing circles\n        if (self.draw.type_ === 'Circle' && e.feature.getGeometry().getType() !== 'Polygon') {\n          e.feature.setGeometry(new fromCircle(e.feature.getGeometry()));\n        }\n        // automatic closing of lines to produce a polygon\n        if (self.draw.type_ === 'LineString' && self.curEditingLayer.geometry === 'Polygon') {\n          console.log('cuando entra aqui');\n          const geom = e.feature.getProperties().geometry;\n          const threshold = AppConfiguration.threshold;\n          const last = geom.getLastCoordinate();\n          const first = geom.getFirstCoordinate();\n          const sourceProj = this.map.getView().getProjection();\n          // transform coordinates to a 4326 to use getDistance\n          const distance = getDistance(transform(first, sourceProj, 'EPSG:4326'), transform(last, sourceProj, 'EPSG:4326'));    //\n          if (distance < threshold) {\n            const newCoordinates = e.feature.getProperties().geometry.getCoordinates();\n            newCoordinates.push(first);\n            // console.log(\"la crea o no antes ?\", newCoordinates[newCoordinates.length -1]);\n            const tgeometry = new Polygon([newCoordinates]);\n            if (tgeometry) {\n              e.feature.setGeometry(tgeometry);\n            }\n          }\n          self.measureTooltipElement.className = 'tooltip tooltip-static';  // #TODO styling is not working\n          self.measureTooltip.setOffset([0, -7]);\n        }\n        // adding the interactions that were stopped when drawing\n        if (self.draw.type_ === 'Point' || self.draw.type_ === 'Circle') {\n          // console.log('interaction en el timeout', self.map.getInteractions());\n          setTimeout(() => {\n            self.addDragPinchInteractions();\n          }, 1000);\n        }\n        // adding features to a buffer cache\n        self.editBuffer.push({\n          layerName: self.curEditingLayer.layerName,\n          transaction: 'insert',\n          feats: e.feature,\n          dirty: true,    // dirty is not in the WFS\n          // 'layer': self.curEditingLayer[0],\n          source: tsource\n        });\n        // console.log('editbuffer', self.editBuffer);\n        self.canBeUndo = true;\n        self.cacheFeatures.push({\n          layerName: self.curEditingLayer.layerName,\n          transaction: 'insert',\n          feats: e.feature,\n          dirty: true,    // dirty is not in the WFS\n          // 'layer': self.curEditingLayer[0],\n          source: tsource\n        });\n        // unset tooltip so that a new one can be created\n        self.measureTooltipElement.innerHTML = '';\n        self.measureTooltipElement = null;\n        self.map.removeOverlay(self.measureTooltip);\n        self.createMeasureTooltip();\n      });\n\n    } catch (e) {\n      console.log('Error adding draw interactions', e);\n    }\n   }\nstartDeleting(){\n  /** Creates a new select interaction that will be used to delete features\n   * in the current editing layer  #TODO: simplify if possible concerning wfs layers and sketch layers\n   */\n  let tlayer: any;\n  try{\n  this.map.getLayers().forEach(layer => {\n      if (layer.get('name') === this.curEditingLayer.layerName) {\n        console.log ('layer.get(\\'name\\')', layer.get('name'), this.curEditingLayer.layerName === layer.get('name'));\n        tlayer = layer;\n        return;\n      }\n    });\n  }\n  catch (e) {\n    console.log('error getting the layer in deleting', e);\n  }\n  this.select = new Select({\n    condition: click,  // check if this work on touch\n    layers : [tlayer],\n    hitTolerance: 7 // check if this is enough\n  });\n  this.map.addInteraction(this.select);\n  const self = this;\n  let dirty = true;\n  // HERE add code to delete from the source and add to the buffer\n  this.select.on('select', function(e){\n    const  selectedFeatures = e.target.getFeatures();\n    // const cacheFeatures = [];\n    if (selectedFeatures.getLength() <= 0) {\n      return;\n    }\n    if (self.curEditingLayer.geometry === 'Point' || self.curEditingLayer.geometry === 'Line'\n      || self.curEditingLayer.geometry === 'Polygon') {\n          selectedFeatures.forEach(f => {\n          const lastFeat = f.clone();\n          lastFeat.setId(f.getId()); // to enable adding the feat again?\n          const tempId = f.getId();\n          // cacheFeatures.push(lastFeat);\n          // remove feature from the source\n          self.curEditingLayer.source.removeFeature(f);\n          // insert feature in a cache --> for undo\n          self.editBuffer.push({\n              layerName: self.curEditingLayer.layerName,\n              transaction: 'delete',  // would it be better to add the opposite operation already, e.g., insert?\n              feats: lastFeat,\n              dirty,\n              source: self.curEditingLayer.source\n            });\n        });\n        // clear the selection --> the style will also be clear\n          self.select.getFeatures().clear();\n        // update the possibility to undo and the cache for that\n          self.canBeUndo = true;\n         // self.cacheFeatures.push(cacheFeatures); // this keep open the possibility to delete several an undo several actions\n          console.log ('cache', self.cacheFeatures );\n          console.log ('editBuffer', self.editBuffer );\n          return;\n    }\n    else {\n      // this.ediLayer.geometry is different .. so a sketch layer\n      selectedFeatures.forEach(f =>\n      {\n        // cacheFeatures.push(());\n        // insert feature in a cache --> for undo\n        self.editBuffer.push({\n          layerName: self.curEditingLayer.layerName,\n          transaction: 'delete',  // would it be better to add the opposite operation already, e.g., insert?\n          feats: f.clone(),   // #TODO check id\n          dirty: true,\n          source: self.curEditingLayer.source\n        });\n        self.curEditingLayer.removeFeature(f);\n      });\n      // clear the selection --> the style will also be clear\n      self.select.getFeatures().clear();\n      // self.curEditingLayer.source.refresh(); // #TODO is this needed?\n      // update the possibility to undo\n      self.canBeUndo = true;\n    }\n    });\n  }\n\nremoveDragPinchInteractions(){\n    try {\n      const self = this;\n      this.map.getInteractions().forEach(\n        interaction => {\n              if (interaction instanceof DragPan || interaction instanceof DragZoom || interaction instanceof DragRotate\n                || interaction instanceof PinchZoom   || interaction instanceof PinchRotate)\n              {\n                // self.map.removeInteraction(interaction);\n                interaction.setActive(false);\n              }\n             });\n      console.log ('es posible que aun quede pinchzoom? o se puede incluir en el if de arriba', this.map.getInteractions() );\n      if (this.pinchZoom){\n        this.map.removeInteraction(this.pinchZoom); // check if is there\n      }\n      if (this.pinchRotate){\n        this.map.removeInteraction(this.pinchRotate);   // check if is there\n      }\n    }\n\n    catch (e) {\n      console.log ('Error removing Drag/Pinch interactions', e);\n    }\n  }\n\n  loadWFSlayers(XmlCapText) {\n    /** This function load in the map, the layers available in the QGS project via WFS\n     * @param XmlCapText the xml text produced by the getCapabilities request\n     */\n    const self = this;\n    const xmlParser = new DOMParser();\n    const xmlText = xmlParser.parseFromString(XmlCapText, 'text/xml');\n    const featureTypeList = xmlText.getElementsByTagName('FeatureTypeList')[0];\n    // console.log('XmlCapText', XmlCapText);\n    const tnodes = {};\n    const otherSrsLst = [];\n    const operationsLst = [];\n    let srs: any ;\n    let operation: any ;\n    const nLayers = featureTypeList.children.length - 1;\n    // te feature list contains a set of operations too\n    for (let i = 0; i < nLayers ; i++) {\n     // let node = featureList[i];\n      const node = featureTypeList.getElementsByTagName('FeatureType')[i];\n      // console.log(\"node\",node);\n      const layerName = node.getElementsByTagName('Name')[0].childNodes[0].nodeValue;\n      const layerTitle = node.getElementsByTagName('Title')[0].childNodes[0].nodeValue;\n      const defaultSRS = node.getElementsByTagName('DefaultSRS')[0].childNodes[0].nodeValue;\n      // validation or warning\n      // tslint:disable-next-line:triple-equals\n      if (defaultSRS != AppConfiguration.srsName) {\n        // #TODO uncomment the following line\n        // alert(`The layer ${ layerName }has a different default SRS than the SRS of the project`);\n      }\n      const otherSrs = node.getElementsByTagName('OtherSRS');\n      // this will get a list\n      for (let j = 0; j < otherSrs.length; j++) {\n        srs = node.getElementsByTagName('OtherSRS')[j].childNodes[0].nodeValue;\n        if (srs.length > 0) {\n          otherSrsLst [j] = srs;\n        }\n      }\n      const operations = node.getElementsByTagName('Operations')[0];\n      // this will get a list\n      for (let j = 0; j < operations.children.length; j++) {\n        operation = operations.getElementsByTagName('Operation')[j].childNodes[0].nodeValue;\n        if (operation.length > 0) {\n          operationsLst [j] = operation;\n        }\n      }\n      // adding a log message for a warning concerning the operations available in the projects\n      if (!operationsLst.includes('Query') || !operationsLst.includes('Insert') ||\n         !operationsLst.includes('Update') || !operationsLst.includes('Delete')){\n         // #TODO uncomment alert (`The layer ${ layerTitle } is missing an updating operation, please check your WFS configuration`);\n      }\n      const bBox = node.getElementsByTagName('ows:WGS84BoundingBox')[0];\n      const  dimensions = bBox.getAttribute('dimensions');\n      const lowCorner = bBox.getElementsByTagName('ows:LowerCorner')[0].childNodes[0].nodeValue;   // x and y\n      const upperCorner = bBox.getElementsByTagName('ows:UpperCorner')[0].childNodes[0].nodeValue; // x and y\n      // adding a log message for a warning concerning the extension\n      // tslint:disable-next-line:triple-equals\n      if ((lowCorner.split(' ')[0] == '0' && lowCorner.split(' ')[1] == '0')\n        // tslint:disable-next-line:triple-equals\n      && (upperCorner.split(' ')[0] == '0' && upperCorner.split(' ')[1] == '0')){\n        // #TODO uncomment alert (`The BBOX of ${ layerTitle } might be misConfigured, please check the WFS service`);\n      }\n       // #TODO: raise a warning if the operations excludes Query, Insert, Update or delete\n      // console.log(\"bBox\", dimensions, [lowCorner.split(\" \")[0], lowCorner.split(\" \")[1]]);\n      if (layerName.length > 0) {\n        // store layer properties to use later\n        const geom = this.findGeometryType(layerName);\n        // check editable fields\n        // load the layer in the map\n        const qGsProject = AppConfiguration.QgsFileProject;\n        const qGsServerUrl = AppConfiguration.qGsServerUrl;\n        const outputFormat = '&outputFormat=GeoJSON';\n        const loadedLayers = [];\n        const wfsVersion = 'SERVICE=WFS&VERSION=' + AppConfiguration.wfsVersion;\n        // console.log('layername', layerName, 'urlWFS', urlWFS);\n        const urlWFS = qGsServerUrl + wfsVersion  + '&request=GetFeature&typename=' + layerName +\n          outputFormat  + '&srsname=' + defaultSRS + '&map=' + qGsProject;\n        try {\n          const vectorSource = new VectorSource ({\n          format: new GeoJSON(),\n          // the url can be setup to include extent, projection and resolution\n          url: urlWFS,\n          });\n          const wfsVectorLayer = new VectorLayer ({\n            source: vectorSource,\n            name: layerName,\n            // extent [minx, miny, maxx, maxy].\n            // extent: [lowCorner.split(' ')[0], lowCorner.split(' ')[1],\n            //  upperCorner.split(' ')[0], upperCorner.split(' ')[1]],\n            visible: true,   // #TODO comment this line, by default layers are not visible\n            zIndex: nLayers - i,   // highest zIndex for the first layer and so on.\n            style: function(feature) {    // this equiv to style: function(feature)\n             // console.log(feature.getGeometry().getType(), name);\n              let layerStyle = self.mapQgsStyleService.findStyle(feature, layerName);\n              if (!layerStyle) {\n                layerStyle =  self.mapQgsStyleService.findDefaultStyleProvisional(feature.getGeometry().getType(), layerName);\n              }\n              return(layerStyle);\n            }\n          });\n          tnodes[layerName] = {\n            layerName, // equivalent to \"layerName\" : layerName --> k:v\n            // layerGeom,\n            layerTitle,\n            defaultSRS,\n            otherSrs: otherSrsLst,\n            lowCorner: [lowCorner.split(' ')[0], lowCorner.split(' ')[1]],\n            upperCorner: [upperCorner.split(' ')[0], upperCorner.split(' ')[1]],\n            operations: operationsLst,\n            geometry: geom, // Dependent of QGIS project as the styles.\n            source: vectorSource\n            // dimensions: dimensions,\n            // bbox: bBox,\n          };\n          this.map.addLayer(wfsVectorLayer);\n          this.loadedWfsLayers.push(tnodes[layerName]);  // wfsVectorLayer\n          // console.log(`Layer added ${ layerName }`);\n\n        }\n        catch (e) {\n          console.log (`An error occurred when adding the ${ layerTitle }`, e);\n        }\n      }\n      }\n    // this.loadedWfsLayers = tnodes;\n    // console.log('loaded layers', this.loadedWfsLayers);\n    return(this.loadedWfsLayers);\n  }\n\n  loadDefaultMap(){\n    // aqui uun default Map #TODO\n  }\n  readProjectFile(projectFile): any\n  {\n    const qgsProj = fetch(projectFile, {\n      method: 'GET',\n    })\n      .then(response => {\n        return response.text();\n      })\n      .then(text => {\n        // console.log(text);\n        return (text);\n      })\n      .catch(err => {\n         console.log('Error', err);\n         return ('');\n      });\n    return(qgsProj);\n  }\n\n  updateMapVisibleLayer(selectedLayer){\n    /** update the visibility of a layer in the map\n     * @param selectedLayer the layer that was clicked to show/hide\n     */\n      // console.log('prueba event capture from child emitter', selectedLayer);\n      this.map.getLayers().forEach(layer => {\n        // tslint:disable-next-line:triple-equals\n        if (selectedLayer.layerName == layer.get('name')) {\n          layer.setVisible (!layer.getVisible());\n        }\n      });\n  }\n\n  updateEditingLayer(layer) {\n  // console.log('evento emitido, que llega', layer);\n    /**  starts or stops the editing mode for the layerName given\n     * if there were some edits --> asks for saving changes\n     * @param layerName: the layer that the user select to start/stop editing\n     */\n    // tslint:disable-next-line:triple-equals\n  if (this.curEditingLayer) {\n      // a layer was being edited - ask for saving changes\n      this.stopEditing(this.curEditingLayer);  // test is changes are save to the rigth layer, otherwise it should go #\n      if (this.curEditingLayer === layer) {\n        this.curEditingLayer = null;\n        return;\n      }\n    }\n      // the user wants to switch to another layer, already the edit was stopped with the previous layer\n  this.curEditingLayer = layer;\n  this.startEditing(layer);\n    }\n\n    stopEditing(editLayer) {\n      /** Disables the interactions on the map to start moving/panning and stop drawing\n       *  asks to save changes in the layer if any and call the function for it.\n       *  @param editLayer, the layer that was edited / #TODO editLayer is not required\n       */\n      // stop interactions\n\n      // clear current class and symbol --> it is necessary? when stopping editing but not for saving;\n      this.currentClass = null;\n      this.currentStyle = null;\n      this.removeInteractions();\n    }\n\n    saveEdits(editLayer: any){\n      // console.log('editBuffer.indexOf(editLayer.layerName', this.editBuffer.findIndex(x => x.layerName ===  editLayer.layerName) );\n      console.log('en save', this.editBuffer);\n      if (!(this.editBuffer.length > 0)) {  // nothing to save\n        return;\n      }\n      if (this.editBuffer.findIndex(x => x.layerName ===  editLayer.layerName) === -1)\n      { // nothing to save in the editLayer\n      return;\n      }\n      if (editLayer.geometry === 'Point' || editLayer.geometry === 'Line' || editLayer.geometry === 'Polygon') {\n         this.writeTransactWfs(editLayer);\n      }\n      else {\n          this.saveSketchLayer(editLayer);\n          // it is a 'multi' geometry --> sketch layer\n        }\n      }\n\n  saveSketchLayer(editLayer: any){\n    // #TODO\n    /** saves the changes in a sketch layer\n     * @param editLayer: name of the layer to be saved.\n     */\n    if (this.editBuffer.length > 0) {\n      if (!confirm('Do you want to save changes?')) {//  do not want to save changes\n        return;\n      }\n      this.saveSketchLayer(editLayer);  // save the changes\n      return;\n    }\n  }\n\n  startEditing(layer: any) {\n    /** Enables the interaction in the map to draw features\n     * and update two observables in openLayerService:\n     * the geometry type of the layer being edited, and\n     * the visibility of the editing toolbar\n     */\n    // console.log ('entra a startEditing', layer );\n    try {\n      // this.removeInteractions();  //#TODO verify this is done in addShape\n      // update the observables\n      this.openLayersService.updateShowEditToolbar(true);\n      this.openLayersService.updateLayerEditing(layer.layerName, layer.geometry);\n      // clear caches and styles  // #TODO best way to do...\n      // this.cacheFeatures = [];\n      this.currentClass = null;  // forcing the user to pick and style and cleaning previous style? check\n\n\n    } catch (e) {\n    alert('Error starting editing...');\n    }\n  }\n  removeFeatEditBuffer(feat: any) {\n    /**\n     * removes a feature from the editBuffer\n     * @param feat: the feat to be removed\n     */\n    this.editBuffer.forEach((item, index) => {\n      if (item.feats === feat) {\n        this.editBuffer.splice(index, 1);\n      }\n    });\n  }\n  undoLastEdit(){\n    /**\n     * Undo the last action (insert, update (move), delete)   #TODO update observable to disable button\n     * uses the this.editBuffer to do so and the cacheFeatures\n     */\n    // get only the records for the current layer\n    const curEdits = this.editBuffer.filter(obj => obj.layerName === this.curEditingLayer.layerName);\n    // console.log('curEdits and this.editBuffer', curEdits, this.editBuffer);\n    if (!(curEdits.length > 0 )) {\n      // nothing to save in current layer\n      return;\n    }\n    const lastOperation = this.editBuffer.filter(obj => obj.layerName === this.curEditingLayer.layerName).pop(); // curEdits.pop();\n    console.log ('lastOperatoion', lastOperation);\n    switch (lastOperation.transaction)\n    // rotate and translate are treated as update #TODO change attributes\n    {\n      case 'insert': {\n        // remove from the source\n        console.log('feat', lastOperation.feats);\n        this.curEditingLayer.source.removeFeature(lastOperation.feats);\n        break;\n      }\n      case 'update': {\n        // change to the oldFeat // there could be several features\n        lastOperation.feats.forEach( feat => {\n          const oldFeat = feat.get('oldFeat');\n          oldFeat.getGeometry();\n          const curFeatGeomClone = feat.getGeometry().clone();\n          // set the geometry to the old one\n          feat.setGeometry(oldFeat.getGeometry());\n          // set the new old geometry to the current one\n          feat.set('oldFeat', curFeatGeomClone);\n          // Changes should be available in the buffer\n        });\n        break;\n      }\n       case 'delete': {\n         // insert back\n         // console.log('temp feat', lastOperation.feats.getProperties().class);\n         lastOperation.feats.setStyle(null);  // to allow the style function of the layer to render the feat properly\n         this.curEditingLayer.source.addFeature(lastOperation.feats);  // TODO styling  //lastOperation.feats\n        // this.removeFeatEditBuffer(lastOperation.feats);\n       }\n    }\n    // remove from the edit Buffer\n    this.removeFeatEditBuffer(lastOperation.feats);\n    console.log('this.editBuffer', this.editBuffer);\n  }\n\n  writeTransactWfs(editLayer: any) {\n    console.log (\"entra a save...\", this.editBuffer);\n    /** saves changes on a wfs layer\n     * @param editLayer: layer to save changes stored in the editBuffer\n     */\n    // sacar los elementos de la capa y remover del arreglo.\n    const layerTrs = [];  // initialize\n    layerTrs[editLayer.layerName] = [];     // is this needed?\n    layerTrs[editLayer.layerName].insert = [];\n    layerTrs[editLayer.layerName].delete = [];\n    layerTrs[editLayer.layerName].update = [];\n    layerTrs[editLayer.layerName].source = editLayer.source;\n\n    this.editBuffer.forEach(t => {\n      // create the node for CRU\n      // console.log(\"la consigue o no\", layer.get('name'));\n      if (t.layerName === editLayer.layerName) {\n        // save edits in current edit layer\n        switch (t.transaction) {\n          case 'insert':\n            layerTrs[editLayer.layerName].insert.push(t.feats);   // t.feats is only one feat\n            break;\n          case 'delete':\n            layerTrs[editLayer.layerName].delete.push(t.feats); // t.feats is one feat #TODO next ver delete several\n            break;\n          case 'update':\n            /* t.feats.forEach(f => {\n              layerTrs[editLayer.layerName].update.push(f); // t.feats is an array with one or several feats\n            }); */\n            layerTrs[editLayer.layerName].update.push(t.feats[0]); // t.feats is an array with one or several feats\n            break;\n        }\n      }\n    });\n    console.log('array insert', layerTrs[editLayer.layerName].insert);\n    console.log('array update', layerTrs[editLayer.layerName].update);\n    console.log('array delete', layerTrs[editLayer.layerName].delete);\n    // Another solution can be to empty the editBuffer here --> it could be some data loss if the insertion fails\n    // configure nodes.\n    const strService = 'SERVICE=WFS&VERSION=' + AppConfiguration.wfsVersion + '&REQUEST=DescribeFeatureType';\n    const strUrl = AppConfiguration.qGsServerUrl + strService + '&map=' + AppConfiguration.QgsFileProject;\n    const formatWFS = new WFS();\n    const formatGML = new GML({\n      featureNS: 'http://localhost',\n      featureType: editLayer.layerName\n    });\n    let node: any;\n    const xs = new XMLSerializer();\n    let str: any;\n    let res: any;\n    // Edits should be done in chain... 1)insert, 2)updates, 3) deletes\n    if (layerTrs[editLayer.layerName].insert.length > 0) {\n      node = formatWFS.writeTransaction( layerTrs[editLayer.layerName].insert, null, null, formatGML);\n      str = xs.serializeToString(node);\n      return fetch(strUrl, {\n        method: 'POST', body: str\n      })\n        .then((textInsert) => {\n          console.log('text response insert WFS', textInsert.text());\n          layerTrs[editLayer.layerName].insert = [];\n          if (layerTrs[editLayer.layerName].update.length > 0) {\n            // Edits should be done in chain... 1)insert, 2)updates, 3) deletes\n            node = formatWFS.writeTransaction(null, layerTrs[editLayer.layerName].update, null, formatGML);\n            str = xs.serializeToString(node);\n            console.log('pasa x aqui?');\n            return fetch(strUrl, {\n              method: 'POST', body: str\n            })\n              .then(respUpdate => {\n                console.log('text response update WFS', respUpdate.text());\n                layerTrs[editLayer.layerName].update = [];\n                if (layerTrs[editLayer.layerName].delete.length > 0) {\n                  // Edits should be done in chain... 1)insert, 2)updates, 3) deletes // if enter here only deletes were done\n                  node = formatWFS.writeTransaction(null, null, layerTrs[editLayer.layerName].delete, formatGML);\n                  str = xs.serializeToString(node);\n                  return fetch(strUrl, {\n                    method: 'POST', body: str\n                  })\n                    .then(respDelete => {\n                      return respDelete.text();\n                    })\n                    .then(textDelete => {\n                      console.log('text response update WFS', textDelete);\n                      layerTrs[editLayer.layerName].delete = [];\n                    })\n                    .catch(error => console.error(error));\n                }\n              });\n          }\n        })\n        .then(() => {\n          // cleaning the editbuffer after inserting - updating and deleting\n          this.editBuffer = this.editBuffer.filter(obj => obj.layerName !== editLayer.layerName);\n          console.log('this.editBufferTemp after saving', this.editBuffer);\n        });\n    }\n    if (layerTrs[editLayer.layerName].update.length > 0) {\n      // Edits should be done in chain... 1)insert, 2)updates, 3) deletes // if enter here no inserts were done\n      node = formatWFS.writeTransaction(null, layerTrs[editLayer.layerName].update, null, formatGML);\n      str = xs.serializeToString(node);\n      return fetch(strUrl, {\n        method: 'POST', body: str\n      })\n        .then(respUpdate => {\n          console.log('text response update WFS', respUpdate.text());\n          layerTrs[editLayer.layerName].update = [];\n          if (layerTrs[editLayer.layerName].delete.length > 0) {\n            // Edits should be done in chain... 1)insert, 2)updates, 3) deletes // if enter here only deletes were done\n            node = formatWFS.writeTransaction(null, null, layerTrs[editLayer.layerName].delete, formatGML);\n            str = xs.serializeToString(node);\n            return fetch(strUrl, {\n              method: 'POST', body: str\n            })\n              .then(respDelete => {\n                return respDelete.text();\n              })\n              .then(textDelete => {\n                console.log('text response update WFS', textDelete);\n                layerTrs[editLayer.layerName].delete = [];\n                console.log('edit array', layerTrs[editLayer.layerName].delete);\n              });\n          }\n        })\n        .then(() => {\n          // cleaning the editbuffer when only updates and deletes where done\n          this.editBuffer = this.editBuffer.filter(obj => obj.layerName !== editLayer.layerName);\n          console.log('this.editBufferTemp after saving', this.editBuffer);\n        });\n    }\n    if (layerTrs[editLayer.layerName].delete.length > 0) {\n      console.log ('entra aqui?.. mientras espera la subscription..');\n      // Edits should be done in chain... 1)insert, 2)updates, 3) deletes // if enter here only deletes were done\n      node = formatWFS.writeTransaction(null, null, layerTrs[editLayer.layerName].delete, formatGML);\n      str = xs.serializeToString(node);\n      return fetch(strUrl, {\n        method: 'POST', body: str\n      })\n        .then(respDelete => {\n          return respDelete.text();\n        })\n        .then(respDelete => {\n          console.log('text response update WFS', respDelete);\n          layerTrs[editLayer.layerName].delete = [];\n          // cleaning the editbuffer when only deletes were done\n          this.editBuffer = this.editBuffer.filter(obj => obj.layerName !== editLayer.layerName);\n          console.log('this.editBufferTemp after saving', this.editBuffer);\n          });\n    }\n  }\n\n  saveWFSAll(){\n  /** this saves all the changes accumulated in the editWFSbuffer\n   * it helps to prevent any data loss\n   * #TODO\n   */\n  }\n\n  findLayer(layername: string) {\n    /**\n     * find the object layer with the name @layername\n     * @param layername: string, the name of the layer to find\n     * @return tlayer: the object layer found\n     */\n    let tlayer: any = null;\n    try{\n      this.map.getLayers().forEach(layer => {\n        if (layer.get('name') === layername) {\n          console.log ('layer.get(\\'name\\')', layer.get('name'), this.curEditingLayer.layerName === layer.get('name'));\n          tlayer = layer;\n          return (tlayer);\n        }\n      });\n    }\n    catch (e) {\n      console.log('error getting the layer', e);\n    }\n  }\n\n  startTranslating()\n  {\n    /** enables to move (translate features selected with a rectangle\n     * The user first select the features and then click in the location where those features will be located\n     * so far no difference in the code for sketch and WFS layers..\n     */\n   const lyr = this.findLayer(this.curEditingLayer.layerName);\n   const updateFeats = [];\n   if (lyr === null) {\n     alert('Error retrieving current layer');\n     return;\n   }\n   this.removeInteractions();\n   this.select = new Select({\n      layers: [lyr],   // avoid selecting in other layers..\n      condition: click,  // check if this work on touch\n      hitTolerance: 7,    // check if we should adjust for # types of geometries..\n      style: this.selectStyle,\n    });\n   this.map.addInteraction(this.select);\n   console.log('interactions in the map',this.map.getInteractions());\n   this.dragBox = new DragBox({className: 'boxSelect'});\n   this.map.addInteraction(this.dragBox);\n   const self = this;\n   const tsource = this.curEditingLayer.source;\n   // add #TODO here the rest of the code.\n   // clear a previous selection\n\n   this.dragBox.on('boxend', () => {\n    if (this.dragBox.getGeometry() == null) {\n      return;\n    }\n    const extent = this.dragBox.getGeometry().getExtent();\n    tsource.forEachFeatureIntersectingExtent(extent, f => {\n            const lastFeat = f.clone();\n            lastFeat.setId(f.getId());\n            f.set('oldFeat', lastFeat);\n            self.select.getFeatures().push(f);\n            self.cacheFeatures.push({\n            layerName: self.curEditingLayer.layerName,\n            transaction: 'translate',  // would it be better to add the opposite operation already, e.g., insert?\n            feats: lastFeat,\n            source: self.curEditingLayer.source\n            });\n          }\n        );\n     });\n    // Add the translation interaction to the selected features\n   const selectedFeatures = this.select.getFeatures();\n   this.translate = new Translate({\n      features: selectedFeatures\n    });\n   this.map.addInteraction(this.translate);\n   // insert features into the editBuffer and cacheFeatures\n   this.translate.on('translateend', () => {\n     console.log('selected features', selectedFeatures);\n     selectedFeatures.forEach( f => {\n       updateFeats.push(f);\n     });\n\n     // const tempId = f.getId();\n     // independently of old or new feat, just add the translation) #TODO check if the order is correct --> last position is saved\n     self.editBuffer.push({\n         layerName: self.curEditingLayer.layerName,\n         transaction: 'update',\n         feats: updateFeats,    // add all the features moved in a unique transaction --> check in saving WFS\n         source: tsource\n       });\n     this.select.getFeatures().clear();\n     });\n   console.log('self.editBuffer', self.editBuffer);\n     // clear the selection\n\n   //\n   // action can be undo\n   this.canBeUndo = true;\n\n   // each time of starting a box clear features\n   this.dragBox.on('boxstart', function() {\n      self.select.getFeatures().clear();\n   });\n  }\n\n\n  startRotating() {\n\n  }\n  startCopying()\n  {\n  }\n  startIdentifying()\n  {\n  }\n  startMeasuring() {\n  }\n\n  updateOrderVisibleLayers(editLayers) {\n    /** updates the order in which layers are rendered in the map\n     * @param editLayers: the list of layers to arrange the order (emitted by the layerPanel component)\n     */\n    const nLayers = editLayers.length;\n    let tIndex = 1;\n    for (const lyr of editLayers) {\n      this.map.getLayers().forEach(layer => {\n        if (layer.get('name') == lyr.layerName) {\n          layer.setZIndex(nLayers - tIndex);\n          tIndex = tIndex + 1;\n        }\n      });\n    }\n   }\n  removeInteractions(){\n    /**\n     * Remove the interactions to draw, select or move\n     */\n    try {\n      this.map.removeInteraction(this.draw);\n      this.map.removeInteraction(this.select);\n      this.map.removeInteraction(this.translate);\n      this.map.removeInteraction(this.snap);\n      this.map.removeInteraction(this.dragBox);\n     /* this.draw.setActive(false);\n      this.select.setActive(false);\n      this.translate.setActive(false);\n      this.snap.setActive(false);\n      this.dragBox.setActive(false); */\n    }\n    catch (e) {\n      console.log ('Error removing interactions', e);\n    }\n  }\n  findGeometryType(layerName){\n     /** Finds the geometry type of the layerName by looking in the dictionary filled when parsing the QGS project\n      * @oaram layerName: the name of the layer to look for the geometry type\n      */\n    let geometryType = null;\n    if (this.layersGeometryType[layerName]){\n      geometryType = this.layersGeometryType[layerName].layerGeom;\n    }\n    // console.log('geometryType', layerName, geometryType);\n    return (geometryType);\n  }\n  addDragPinchInteractions(){\n    // console.log(\"aqui agregando dragpinch\", this.map.getInteractions());\n    try {\n      const self = this;\n      this.map.getInteractions().forEach(\n        interaction => {\n          if (interaction instanceof DragPan || interaction instanceof DragZoom || interaction instanceof DragRotate\n            || interaction instanceof PinchZoom   || interaction instanceof PinchRotate)\n          {\n            interaction.setActive(true);\n           // self.map.removeInteraction(interaction);\n          }\n        });\n      if (!(this.pinchZoom)){\n        this.map.addInteraction(this.pinchZoom); // check if is there\n      }\n      if (!(this.pinchRotate)){\n        this.map.addInteraction(this.pinchRotate);   // check if is there\n      }\n    }\n    catch (e) {\n      console.log ('Error readding Drag/Pinch interactions', e);\n    }\n\n}\n\n\n  ngOnDestroy() {\n    // prevent memory leak when component destroyed\n    // unsubscribe all the subscriptions\n     const subscriptions = new Subscription();\n     subscriptions.add(this.subsTocurrentSymbol).add(this.subsToShapeEdit);\n     subscriptions.unsubscribe();\n  }\n\n}\n\n\n// have a default map? have a parameter in the cinfiguration file..\n\n","<div id=\"map\" class=\"map\">\n</div>\n<app-layer-panel [editLayers]=\"loadedWfsLayers\" (layerVisClick)=\"updateMapVisibleLayer($event)\"\n(editLayerClick)=\"updateEditingLayer($event)\"\n(layersOrder) = \"updateOrderVisibleLayers($event)\"></app-layer-panel>\n\n","import {NgModule} from '@angular/core';\r\nimport {A11yModule} from '@angular/cdk/a11y';\r\nimport {ClipboardModule} from '@angular/cdk/clipboard';\r\nimport {DragDropModule} from '@angular/cdk/drag-drop';\r\nimport {PortalModule} from '@angular/cdk/portal';\r\nimport {ScrollingModule} from '@angular/cdk/scrolling';\r\nimport {CdkStepperModule} from '@angular/cdk/stepper';\r\nimport {CdkTableModule} from '@angular/cdk/table';\r\nimport {CdkTreeModule} from '@angular/cdk/tree';\r\nimport {MatAutocompleteModule} from '@angular/material/autocomplete';\r\nimport {MatBadgeModule} from '@angular/material/badge';\r\nimport {MatBottomSheetModule} from '@angular/material/bottom-sheet';\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport {MatButtonToggleModule} from '@angular/material/button-toggle';\r\nimport {MatCardModule} from '@angular/material/card';\r\nimport {MatCheckboxModule} from '@angular/material/checkbox';\r\nimport {MatChipsModule} from '@angular/material/chips';\r\nimport {MatStepperModule} from '@angular/material/stepper';\r\nimport {MatDatepickerModule} from '@angular/material/datepicker';\r\nimport {MatDialogModule} from '@angular/material/dialog';\r\nimport {MatDividerModule} from '@angular/material/divider';\r\nimport {MatExpansionModule} from '@angular/material/expansion';\r\nimport {MatGridListModule} from '@angular/material/grid-list';\r\nimport {MatIconModule} from '@angular/material/icon';\r\nimport {MatInputModule} from '@angular/material/input';\r\nimport {MatListModule} from '@angular/material/list';\r\nimport {MatMenuModule} from '@angular/material/menu';\r\nimport {MatNativeDateModule, MatRippleModule} from '@angular/material/core';\r\nimport {MatPaginatorModule} from '@angular/material/paginator';\r\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\r\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\r\nimport {MatRadioModule} from '@angular/material/radio';\r\nimport {MatSelectModule} from '@angular/material/select';\r\nimport {MatSidenavModule} from '@angular/material/sidenav';\r\nimport {MatSliderModule} from '@angular/material/slider';\r\nimport {MatSlideToggleModule} from '@angular/material/slide-toggle';\r\nimport {MatSnackBarModule} from '@angular/material/snack-bar';\r\nimport {MatSortModule} from '@angular/material/sort';\r\nimport {MatTableModule} from '@angular/material/table';\r\nimport {MatTabsModule} from '@angular/material/tabs';\r\nimport {MatToolbarModule} from '@angular/material/toolbar';\r\nimport {MatTooltipModule} from '@angular/material/tooltip';\r\nimport {MatTreeModule} from '@angular/material/tree';\r\n\r\n@NgModule({\r\n  exports: [\r\n    A11yModule,\r\n    ClipboardModule,\r\n    CdkStepperModule,\r\n    CdkTableModule,\r\n    CdkTreeModule,\r\n    DragDropModule,\r\n    MatAutocompleteModule,\r\n    MatBadgeModule,\r\n    MatBottomSheetModule,\r\n    MatButtonModule,\r\n    MatButtonToggleModule,\r\n    MatCardModule,\r\n    MatCheckboxModule,\r\n    MatChipsModule,\r\n    MatStepperModule,\r\n    MatDatepickerModule,\r\n    MatDialogModule,\r\n    MatDividerModule,\r\n    MatExpansionModule,\r\n    MatGridListModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    MatListModule,\r\n    MatMenuModule,\r\n    MatNativeDateModule,\r\n    MatPaginatorModule,\r\n    MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    MatRadioModule,\r\n    MatRippleModule,\r\n    MatSelectModule,\r\n    MatSidenavModule,\r\n    MatSliderModule,\r\n    MatSlideToggleModule,\r\n    MatSnackBarModule,\r\n    MatSortModule,\r\n    MatTableModule,\r\n    MatTabsModule,\r\n    MatToolbarModule,\r\n    MatTooltipModule,\r\n    MatTreeModule,\r\n    PortalModule,\r\n    ScrollingModule\r\n  ]\r\n})\r\nexport class DemoMaterialModule {}\r\n","import { Injectable } from '@angular/core';\nimport {Subject} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class OpenLayersService {\n  private existingProject = new Subject<any>();\n  existingProject$ = this.existingProject.asObservable();\n  private showEditToolbarSource = new Subject<boolean>();\n  showEditToolbar$ = this.showEditToolbarSource.asObservable();\n // object: {[key: string]: string};\n  private layerEditingSource = new Subject <{layerName: any; layerGeom: any; }>();\n  layerEditing$ = this.layerEditingSource.asObservable();\n  private shapeEditTypeSource = new Subject<string>();\n  shapeEditType$ = this.shapeEditTypeSource.asObservable();\n  private showSymbolPanelSource = new Subject <boolean>();\n  showSymbolPanel$ = this.showSymbolPanelSource.asObservable();\n  private currentSymbolSource = new Subject<any>();\n  currentSymbol$ = this.currentSymbolSource.asObservable();\n  private saveCurrentLayerSource = new Subject<any>();\n  saveCurrentLayer$ = this.saveCurrentLayerSource.asObservable();\n  private deleteFeatsSource = new Subject<any>();\n  deleteFeats$ = this.deleteFeatsSource.asObservable();\n  private editActionSource = new Subject<any>();\n  editAction$ = this.editActionSource.asObservable();\n  private zoomHomeSource = new Subject<boolean>();\n  zoomHome$ = this.zoomHomeSource.asObservable();\n  constructor() { }\n\n  updateExistingProject(projectOpened: boolean){\n    /**\n     * @param projectOpened: indicates if there is a project opened (not a default view)\n     */\n    this.existingProject.next(projectOpened);\n  }\n\n  updateZoomHome(value= true){\n    /**\n     * sends a request to the map component to go to the Home\n     */\n    this.zoomHomeSource.next(value);\n  }\n\n  updateShapeEditType(shapeEdit: any){\n    this.shapeEditTypeSource.next(shapeEdit);\n  }\n\n  updateDeleteFeats(active: boolean){\n    /** Updates the observable to the next value\n     * active: boolean; true or false to allow delete features\n     */\n    this.deleteFeatsSource.next(active);\n  }\n\n  updateEditAction(action: string){\n    /** Updates the observable to the next value\n     * @parama action: string indicating the action 'ModifyBox', 'Delete', 'Copy' , etc to perform in the map\n     */\n    this.editActionSource.next(action);\n  }\n\n  updateSaveCurrentLayer(save: true){\n    /** Updates the observable to the next value\n     * visible: boolean; true or false to show/hide the editing toolbar\n     */\n    this.saveCurrentLayerSource.next(save);\n  }\n\n  updateShowEditToolbar(visible: boolean) {\n    /** Updates the observable to the next value\n     * visible: boolean; true or false to show/hide the editing toolbar\n     */\n    this.showEditToolbarSource.next(visible);\n  }\n\n  updateLayerEditing(layerName, layerGeom){\n    /** Updates the observable Geometry type for editing to the next value\n     * geom: string; the geometry type: point, line, polygons..\n     */\n    this.layerEditingSource.next({layerName, layerGeom});\n  }\n\n  updateShowSymbolPanel(visible: boolean) {\n    /** Updates the observable ShowSymbolPanel to the next value\n     * @param visible: boolean true or false to show/hide the editing toolbar\n     */\n    this.showSymbolPanelSource.next(visible);\n  }\n\n  updateCurrentSymbol(symbol: any) {\n    /** Updates the observable ShowSymbolPanel to the next value\n     * @param symbol: style to be used to draw current feature\n     */\n    this.currentSymbolSource.next(symbol);\n  }\n}\n","import {AfterViewInit, Component, Directive, ElementRef, Input, OnInit, QueryList, ViewChild, ViewChildren} from '@angular/core';\nimport { Observable, Subscription,  of as observableOf } from 'rxjs';\nimport {OpenLayersService} from '../open-layers.service';\nimport {MapQgsStyleService} from '../map-qgs-style.service';\nimport { DEVICE_PIXEL_RATIO } from 'ol/has.js';\nimport {toContext} from 'ol/render';\nimport Feature from 'ol/Feature';\nimport Polygon from 'ol/geom/Polygon';\nimport Point from 'ol/geom/Point';\nimport LineString from 'ol/geom/LineString';\nimport {AppConfiguration} from '../app-configuration';\nimport {Fill, Stroke, Style, Icon, Circle, RegularShape} from 'ol/style';\nimport {style} from '@angular/animations';\nimport {extend} from 'ol/extent';\n@Component({\n  selector: 'app-symbol-list',\n  templateUrl: './symbol-list.component.html',\n  styleUrls: ['./symbol-list.component.scss']\n})\nexport class SymbolListComponent implements OnInit, AfterViewInit {\n  @ViewChild('symbolList', {static: false}) symbolList: ElementRef <HTMLCanvasElement>;   // to access the properties of canvas\n  // @ViewChildren('canvas') myCanvas: ElementRef<HTMLCanvasElement>;   // to access the properties of canvas\n  @ViewChildren('cmp') myCanvas: QueryList<ElementRef<HTMLCanvasElement>>; // it works\n  variable = '';\n  symbolActiveKey: any = null;\n  x = 0;\n  y = 0;\n  startX = 0;\n  startY = 0;\n  symbols$ = {};\n  symbolsLength = 0;\n  geometryTypeSymbols: string;\n  displaySymbolList$: Observable<boolean>;\n  subscriptionToShowSymbols: Subscription;\n  editLayerName$: Observable<string>;\n  subscriptionToLayerEditing: Subscription;\n  styles: any;   // parece un dict\n  constructor(private openLayersService: OpenLayersService, private mapQgsStyleService: MapQgsStyleService) {\n  this.subscriptionToShowSymbols = this.openLayersService.showSymbolPanel$.subscribe(\n    data => {\n      this.displaySymbolList$ = observableOf(data);\n    },\n      error => {console.log ('Error in subscription to showSymbolPanel', error);}\n  );\n  this.subscriptionToLayerEditing = this.openLayersService.layerEditing$.subscribe(\n    data => {\n      this.styles = this.mapQgsStyleService.getLayerStyle(data.layerName);\n      // console.log('styles in symbolList.. pasito a pasito', this.styles);\n      this.symbols$ = this.getSymbolList (this.styles);\n      this.symbolsLength = Object.keys(this.symbols$).length;\n      this.geometryTypeSymbols = data.layerGeom;\n    },\n      error => console.log('Error in subscription to Layer Editing in SymbolList', error)\n  );\n  }\n  onPanStart(event: any): void {\n    /** Sets the current coordinates of the layerPanel to use later when setting a new position\n     * triggered when a pan event starts in the layerpanel card\n     * @param event, type event\n     */\n    this.startX = this.x;\n    this.startY = this.y;\n  }\n  onPan(event: any): void {\n    /** Sets the new location of the layerPanel after a pan event was triggered in the layerPanel card\n     * @param event, type event\n     */\n    event.preventDefault();\n    this.x = this.startX + event.deltaX;\n    this.y = this.startY + event.deltaY;\n  }\n\n  ngOnInit(): void {\n    this.displaySymbolList$ = observableOf(true);  // #Only for development purposes, #TODO put in fs\n  }\n\n  ngAfterViewInit(){\n   this.myCanvas.changes.subscribe((r) => {\n     // console.log('r', r);\n      this.createSymbolsinCanvas();\n    });\n  }\n\n  getSymbolList(styles: any) {\n    /** Creates a dictionary with the styles per class when needed\n     * @param styles: the array with the classes and styles\n     */\n    // console.log('que hay en styles', styles);\n    let symbolDict = {};\n    for (const key of Object.keys(styles)){\n      // console.log(`${key} -> ${styles[key].value}`);\n      symbolDict[styles[key].value] = styles[key].style;\n    }\n    // console.log('estilos en dict format', symbolDict);\n    return symbolDict;\n  }\n\n  closeListSymbols(){\n    this.displaySymbolList$ = observableOf(false);\n  }\n createSymbolsinCanvas(){\n    // to test layerGeom: string, styles: any\n   /** Edita los canvas creados for each symbol by adding a feature with the styles on it\n    * @param styles: array;\n    * @param layerGeom: geometry of the layer as specified in the QGIS project ;\n    */\n   // let canvas = this.myCanvas.toArray()[i].nativeElement;\n   let feature: any;\n   const allCanvas = this.myCanvas.toArray();\n   for (let i = 0 ; i < allCanvas.length ; i++) {\n     const factor = 10; // factor to use in scaling symbol in the canvas\n     const canvas = allCanvas[i];\n     if (canvas.nativeElement.getContext('2d')) {\n       let key = canvas.nativeElement.id;\n       const width = canvas.nativeElement.width * devicePixelRatio;\n       const height = canvas.nativeElement.height * devicePixelRatio;\n       canvas.nativeElement.width = width;\n       canvas.nativeElement.height = height;\n      // console.log('width and height', height, width, canvas.nativeElement.width , devicePixelRatio  );\n       const render = toContext(canvas.nativeElement.getContext('2d'));\n       let stylelayer = this.symbols$[key];\n       let stylelayerClone = [];   // clone the style hopefully deep copy\n       switch (this.geometryTypeSymbols) {\n         case 'Point': {\n           const cx = width / 2;\n           const cy = height / 2;\n           feature = new Feature(new Point([cx, cy]));\n           // possible solution or workaround for SVG\n           // https://stackoverflow.com/questions/54696758/how-do-i-draw-a-javascript-modified-svg-object-on-a-html5-canvas\n           const tempStyle = new Style({\n             image: new Icon({\n               color: '#8959A8',\n               crossOrigin: 'anonymous',\n               imgSize: [20, 20],\n               src: 'svg/religion/place_of_worship_christian3.svg'\n             })\n           });\n           render.drawFeature(feature, tempStyle);\n           feature = new Feature(new Point([cx + cx/3, cy]));  // only for testing\n           stylelayerClone.push(new Style({\n             image: new RegularShape({\n               fill: new Fill({color: 'yellow'}),\n               stroke: new Stroke({color: 'red'}),\n               points: 3,\n               radius: 30,\n               rotation: Math.PI / 4,\n               angle: 0 })\n           }));\n           /*  #TODO replace for the correct code\n            if ( img && img.getSize() != null) {\n                   // #TODO Temporal to replace\n                   const anchor = img.getAnchor();\n                   const si = img.getSize();\n                   console.log('anchor, size', anchor, si);\n                 }\n                 else {\n\n                 } */\n           break;\n         }\n         case 'Line': {\n           // calculate the start and end point and draw as styles are defined in the array\n           let heigthStroke = height / 2;\n           let cloneStyle: any;\n           let strokeClone: any;\n           for (const style of stylelayer) {\n             cloneStyle = style.clone();\n             strokeClone = cloneStyle.getStroke();\n             strokeClone.setWidth(strokeClone.getWidth() * factor);   // 10 to mkae the line visible.\n             heigthStroke =  (height - strokeClone.getWidth()) / 2 ;\n             cloneStyle.setStroke(strokeClone);\n             stylelayerClone.push(cloneStyle);\n           }\n           feature = new Feature(new LineString([[10, heigthStroke], [ width - (width / 4), heigthStroke ]]));\n           // console.log('height, width and feature', heigthStroke, strokeClone.getWidth(), feature.getProperties());\n           //render.drawFeature(feature, testStyle);\n           break;\n         }\n         case 'Polygon': {\n           // en landuse 9 es muy interesante, pattern is not visible\n           render.lineWidth = 5;\n           const wide = width - (width / 4);\n           const high = height - (height / 4);\n           feature = new Feature(new Polygon([[[0, 0], [0, high], [wide, high], [wide, 0], [0, 0]]]));\n           break;\n         }\n       }\n       // if stylelayerClone has something it will be drawn\n       if (stylelayerClone.length > 0 ){\n         for (let style of stylelayerClone) {\n           render.drawFeature(feature, style);\n         }\n       }\n       else\n       {\n         for (let style of stylelayer) {\n           // console.log('style', style );\n           render.drawFeature(feature, style);\n         }\n       }\n     }\n    }\n }\n\n  updateActivesymbol(symbol: any){\n    /**\n     * update the activeSymbol\n     * @param symbol: array of styles\n     * @key: the key o the div\n     *\n     */\n    //console.log('y ahora que sigue..activeKey, key, value.', this.symbolActiveKey, symbol.key, symbol );\n    this.symbolActiveKey = symbol.key;\n    let curDiv = document.getElementById('+' + symbol.key );\n    curDiv.className += \" active\";\n    // console.log('symbol in symbollist',symbol);\n    this.openLayersService.updateCurrentSymbol(symbol);\n  }\n\n\n}\n","<div class =\"example-list\"   *ngIf=\"displaySymbolList$ | async\" [style.left.px]=\"x\" [style.top.px]=\"y\"\n     (panstart)=\"onPanStart($event)\" (panmove)=\"onPan($event)\">\n<mat-card class=\"symbol-list\"  #symListCard>\n  <mat-card-title-group>\n    <mat-card-title class=\"panelTitle\">Symbols</mat-card-title>\n    <button mat-mini-fab (click)=\"closeListSymbols()\" class=\"matCloseWrapper\">\n      <mat-icon  class= \"closeIcon\">close</mat-icon>\n    </button>\n  </mat-card-title-group>\n  <mat-divider class = \"toolbarDivider\"></mat-divider>\n  <span *ngIf= \"symbolsLength == 0\"> ..creating List of Symbols</span>\n  <!--<mat-list-item *ngFor=\"let symbol of symbols | keyvalue\" class = \"mat-list-item active\" >\n    <button mat-icon-button (click)=\"changeCurrentSymbol(img)\" > <img src = {{img.value}} > {{ img.key}}\n    </button>\n  </mat-list-item>  !-->\n  <!--<canvas id=\"symbolList\" width=\"200\" height=\"200\"></canvas> -->\n  <span>{{variable}}</span>\n  <div class=\"symbol\" *ngFor=\"let symbol of symbols$ | keyvalue\">\n     <div id = \"+{{symbol.key}}\"  (click)=\"updateActivesymbol(symbol)\"\n      [ngClass]=\"symbolActiveKey == symbol.key? 'active': 'normal'\" >\n      <canvas id ={{symbol.key}} class=\"canvasSymbol\" #cmp></canvas>\n      <span> {{symbol.key}} </span>\n     </div>\n  </div>\n\n</mat-card>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport {Subscription} from 'rxjs';\nimport {OpenLayersService} from '../open-layers.service';\nimport {MatIconRegistry} from '@angular/material/icon';\nimport {DomSanitizer} from '@angular/platform-browser';\n//import {Indicator, IndicatorAnimations} from '../indicator';\n\n@Component({\n  selector: 'app-toolbar',\n  templateUrl: './toolbar.component.html',\n  styleUrls: ['./toolbar.component.scss']\n // animations: IndicatorAnimations\n})\nexport class ToolbarComponent implements OnInit {\n  x = 0;\n  y = 0;\n  startX = 0;\n  startY = 0;\n  subscriptionExistingProject: Subscription;\n  existingProject = true;\n\n  onPanStart(event: any): void {\n    this.startX = this.x;\n    this.startY = this.y;\n  }\n  onPan(event: any): void {\n    event.preventDefault();\n    this.x = this.startX + event.deltaX;\n    this.y = this.startY + event.deltaY;\n  }\n  zoomHome(){\n    this.openLayersService.updateZoomHome(true);\n  }\n   constructor(iconRegistry: MatIconRegistry, sanitizer: DomSanitizer, private openLayersService: OpenLayersService) {\n\n    iconRegistry.addSvgIcon(\n      'layerScratch',\n      sanitizer.bypassSecurityTrustResourceUrl('assets/img/baseline-layers-new-24px.svg')\n    );\n  }\n  createScratchLayer(){\n    /**\n     * #TODO  send a subscription? ...\n     */\n  }\n\n  ngOnInit(): void {\n    this.subscriptionExistingProject = this.openLayersService.existingProject$.subscribe(\n      (data: any) => this.existingProject = true,\n      (error) => {\n        alert('error retrieving existing project');\n        console.log(error);\n      });\n  }\n\n}\n","<!--suppress AngularUndefinedBinding -->  <!-- to fix a bug in webstorm -->\n\n<div class =\"mapToolbar\"   *ngIf=\"existingProject\" [style.left.px]=\"x\" [style.top.px]=\"y\"\n     (panstart)=\"onPanStart($event)\" (panmove)=\"onPan($event)\">\n<mat-card class=\"spacetitle\" color=\"primary\">\n <!-- <mat-card-title-group>\n    <mat-card-title class=\"toolbarTitle\">&nbsp;</mat-card-title>\n  </mat-card-title-group> -->\n  <mat-divider class = \"toolbarDivider\"></mat-divider>  <!-- to provide a space to drag -->\n  <mat-toolbar color=\"primary\">\n    <button matTooltip=\"Zoom to the study area\" aria-labelledby=\"Zoom to the study area\" mat-icon-button (click)=\"zoomHome()\">\n      <mat-icon>home</mat-icon>\n    </button>\n    <button mat-icon-button aria-labelledby=\"Show Layer Panel\" matTooltip=\"Show List of layers\" (click)=\"createScratchLayer()\" >\n      <mat-icon class=\"svgIconToolbar\">layers</mat-icon>\n    </button>\n    <!--<button mat-icon-button aria-labelledby=\"Edit layers\" matTooltip=\"Edit layers\" (click)=\"layerEditingChange()\">\n      <mat-icon>edit</mat-icon>\n    </button> !-->\n    <button mat-icon-button aria-labelledby=\"Add a scratch layer\" matTooltip=\"Add a scratch layer\" (click)=\"createScratchLayer()\" >\n    <mat-icon class=\"svgIconToolbar\" svgIcon=\"layerScratch\"></mat-icon>\n    </button>\n  </mat-toolbar>\n</mat-card>\n <!--  <div class=\"location\">({{x}}, {{y}})</div> esto muestra las coordenas que se usan para la nueva pos-->\n</div>\n\n\n\n\n\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n//import {DemoMaterialModule} from './app/material-module';\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\nimport 'hammerjs';  // make the gesture support globally available\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}